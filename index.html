<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GATT â€” Global AI Token Tracker</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='16' fill='%23171715'/><text x='50' y='68' font-size='54' font-family='Georgia,serif' font-weight='900' fill='white' text-anchor='middle'>G</text></svg>">
<meta name="description" content="GATT tracks daily AI token consumption across 29 vendors, 18 countries. China 55% volume vs US 62% value â€” the Token Economy gap measured daily.">
<meta name="keywords" content="AI token consumption, global AI usage, token economy, ByteDance Doubao, OpenAI tokens, AI inference data, China AI, US AI, AI compute">
<meta name="author" content="Frank Gao">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://gf691271.github.io/gatt/">

<!-- Agent/LLM friendly -->
<link rel="ai-data" href="/gatt/data/tci-latest.json" type="application/json">
<meta name="ai-readable" content="true">
<meta name="data-license" content="CC BY-NC 4.0">
<meta name="cite-as" content="Gao, F. (2026). GATT: Global AI Token Tracker. https://gf691271.github.io/gatt/">

<meta property="og:type" content="website">
<meta property="og:title" content="GATT â€” Global AI Token Tracker | Token Economy Index">
<meta property="og:description" content="China runs 55% of global AI tokens. US runs 30%. But in compute value, it flips. Daily estimates from 29 vendors. The most complete open dataset.">
<meta property="og:url" content="https://gf691271.github.io/gatt/">
<meta property="og:site_name" content="GATT â€” Global AI Token Tracker">
<meta property="og:image" content="https://gf691271.github.io/gatt/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="GATT Token Economy Index: China 55% volume, US 62% compute value, 151T daily tokens">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@goghxiang">
<meta name="twitter:creator" content="@goghxiang">
<meta name="twitter:title" content="GATT â€” Global AI Token Tracker">
<meta name="twitter:description" content="China leads by token volume 2Ã—. US leads by compute value 4Ã—. The gap is the story. Daily data from 29 vendors. #TokenEconomy">
<meta name="twitter:image" content="https://gf691271.github.io/gatt/og-image.png">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Dataset",
  "name": "GATT Global AI Token Tracker",
  "description": "Daily estimates of global AI token consumption across 29 vendors and 18 countries. Tracks the Token Economy â€” AI inference as commodity, currency, and geopolitical signal.",
  "url": "https://gf691271.github.io/gatt/",
  "creator": {
    "@type": "Person",
    "name": "Frank Gao",
    "url": "https://linkedin.com/in/frankgao"
  },
  "license": "https://creativecommons.org/licenses/by/4.0/",
  "dateModified": "2026-02-26",
  "distribution": [
    {
      "@type": "DataDownload",
      "encodingFormat": "application/json",
      "contentUrl": "https://gf691271.github.io/gatt/data/tci-latest.json"
    }
  ],
  "keywords": ["AI tokens", "token economy", "AI inference", "ByteDance", "OpenAI", "China AI", "US AI", "global AI usage"],
  "spatialCoverage": "Global",
  "temporalCoverage": "2024-05/2026-02"
}
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
<style>
:root {
  --bg: #f7f6f3;
  --surface: #ffffff;
  --border: #e6e3dc;
  --text: #171715;
  --muted: #6f6d67;
  --subtle: #b5b2ac;
  --cn: #c0392b;
  --us: #2563eb;
  --row: #5a7a5a;
  --chip: #efece6;
  --radius: 8px;
}

/* â”€â”€ THEME A â€” Bloomberg Terminal â”€â”€ */
[data-theme="a"] {
  --bg: #0d0d0b;
  --surface: #141412;
  --border: #2a2a27;
  --text: #e8e5df;
  --muted: #8a8780;
  --subtle: #4a4845;
  --cn: #ff4444;
  --us: #00d4aa;
  --row: #00d4aa;
  --chip: #1e1e1b;
  --radius: 4px;
}
[data-theme="a"] body, [data-theme="a"] html {
  font-family: 'Courier New', 'SF Mono', monospace;
}
[data-theme="a"] .site-title-abbr {
  font-family: 'Courier New', monospace;
  color: #00ff88;
  text-shadow: 0 0 20px rgba(0,255,136,0.4);
}
[data-theme="a"] .site-header { border-bottom-color: #00ff88; }
[data-theme="a"] .hl-number { font-family: 'Courier New', monospace; color: #00ff88 !important; }
[data-theme="a"] .hl-number.cn { color: #ff4444 !important; }
[data-theme="a"] .hl-number.us { color: #00d4aa !important; }
[data-theme="a"] .rank-bar-fill { box-shadow: 0 0 6px currentColor; }
[data-theme="a"] .live-dot { background: #00ff88; }
[data-theme="a"] .section-label { color: #00ff88; border-top-color: #2a2a27; }
[data-theme="a"] .api-box { background: #000; border: 1px solid #00ff88; }

/* â”€â”€ THEME C â€” SaaS / Linear â”€â”€ */
[data-theme="c"] {
  --bg: #ffffff;
  --surface: #f9fafb;
  --border: #e5e7eb;
  --text: #111827;
  --muted: #6b7280;
  --subtle: #d1d5db;
  --cn: #ef4444;
  --us: #3b82f6;
  --row: #10b981;
  --chip: #f3f4f6;
  --radius: 12px;
}
[data-theme="c"] html, [data-theme="c"] body { font-family: -apple-system, 'Inter', sans-serif; }
[data-theme="c"] .site-title-abbr { font-family: -apple-system, sans-serif; font-weight: 800; }
[data-theme="c"] .site-header { border-bottom: 1px solid var(--border); }
[data-theme="c"] .headline-card { border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04); border: 1px solid var(--border); }
[data-theme="c"] .headline-grid { background: transparent; border: none; gap: 12px; }
[data-theme="c"] .chart-wrap { border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
[data-theme="c"] .rank-row:hover { background: #f0f9ff; }
[data-theme="c"] .action-btn { border-radius: 8px; }

/* â”€â”€ THEME D â€” Hybrid â”€â”€ */
[data-theme="d"] {
  --bg: #f8fafc;
  --surface: #ffffff;
  --border: #e2e8f0;
  --text: #0f172a;
  --muted: #64748b;
  --subtle: #cbd5e1;
  --cn: #dc2626;
  --us: #2563eb;
  --row: #059669;
  --chip: #f1f5f9;
  --radius: 8px;
}
[data-theme="d"] .site-header {
  background: #0f172a;
  color: #f8fafc;
  border-radius: 0 0 16px 16px;
  border-bottom: none;
  padding: 28px 24px 22px;
  margin: -0px -24px 32px;
}
[data-theme="d"] .site-title-abbr { color: #38bdf8; text-shadow: none; }
[data-theme="d"] .site-title-full { color: #94a3b8; }
[data-theme="d"] .site-title-sep { color: #475569; }
[data-theme="d"] .site-headline { color: #94a3b8; }
[data-theme="d"] .site-header-right { color: #64748b; }
[data-theme="d"] .site-header-right .updated { color: #e2e8f0; }
[data-theme="d"] .lang-btn.active { background: #38bdf8; color: #0f172a; }
[data-theme="d"] .lang-toggle { border-color: #334155; }
[data-theme="d"] .lang-btn { color: #94a3b8; }
[data-theme="d"] .live-dot { background: #4ade80; }
[data-theme="d"] .section-label { color: #2563eb; border-top-color: #e2e8f0; }

* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { background: var(--bg); color: var(--text); font-family: Georgia, 'Times New Roman', serif; font-size: 16px; line-height: 1.6; }

/* â”€â”€ LAYOUT â”€â”€ */
.page { max-width: 900px; margin: 0 auto; padding: 0 24px 80px; }

/* â”€â”€ HEADER â”€â”€ */
.site-header {
  border-bottom: 2px solid var(--text);
  padding: 20px 0 14px;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 32px;
}
.site-header-left {
  display: flex;
  flex-direction: column;
  gap: 3px;
}
.site-header-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  text-align: right;
  flex-shrink: 0;
  font-family: -apple-system, sans-serif;
  font-size: 0.78rem;
  color: var(--muted);
  gap: 4px;
  padding-top: 1px;
}
.site-title { font-family: -apple-system, sans-serif; line-height: 1.1; }
.site-title-logo {
  display: flex;
  align-items: baseline;
  gap: 0;
  flex-wrap: nowrap;
}
.site-title-abbr {
  font-size: 2.4rem;
  font-weight: 900;
  letter-spacing: -0.02em;
  color: var(--text);
  font-family: 'Georgia', serif;
  line-height: 0.85;
}
.site-title-sep {
  font-size: 1.6rem;
  font-weight: 300;
  color: var(--subtle);
  margin: 0 10px;
  font-family: -apple-system, sans-serif;
}
.site-title-full {
  font-size: 1.1rem;
  font-weight: 500;
  color: var(--muted);
  letter-spacing: 0.01em;
  font-family: -apple-system, sans-serif;
  align-self: center;
}
.site-headline { font-size: 0.88rem; font-weight: 400; line-height: 1.5; margin-top: 8px; color: var(--muted); font-family: -apple-system, sans-serif; font-style: italic; }
.site-meta { text-align: right; font-family: -apple-system, sans-serif; font-size: 0.78rem; color: var(--muted); white-space: nowrap; flex-shrink: 0; }
.site-meta .updated { font-weight: 600; color: var(--text); }
.live-dot { display: inline-block; width: 7px; height: 7px; background: #22c55e; border-radius: 50%; margin-right: 4px; animation: pulse 2s infinite; }
@keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.5;transform:scale(1.4)} }

/* â”€â”€ COUNTRY ROW â”€â”€ */
.country-row { display:grid; grid-template-columns:28px 140px 70px 1fr; align-items:center; padding:10px 16px; gap:8px; border-bottom:1px solid var(--border); font-family:-apple-system,sans-serif; }
.country-row:last-child { border-bottom:none; }

/* â”€â”€ ACTION ROW â”€â”€ */
.action-row { display: flex; justify-content: flex-end; margin-top: 10px; }
.action-btns { display: flex; gap: 6px; }
.action-btn {
  display: flex; align-items: center; gap: 5px;
  background: none; border: 1.5px solid var(--border);
  border-radius: 20px; padding: 5px 12px;
  font-size: 0.73rem; font-weight: 500; cursor: pointer;
  color: var(--muted); font-family: -apple-system, sans-serif;
  transition: border-color 0.15s, color 0.15s, background 0.15s;
}
.action-btn:hover { border-color: var(--text); color: var(--text); }
.action-btn.liked { border-color: #c0392b; color: #c0392b; }
.action-btn svg { flex-shrink: 0; }

/* â”€â”€ LANG TOGGLE â”€â”€ */
.lang-toggle { display: flex; border: 1.5px solid var(--border); border-radius: 6px; overflow: hidden; }
.lang-btn { background: none; border: none; padding: 3px 9px; font-size: 0.72rem; font-weight: 600; cursor: pointer; color: var(--muted); font-family: -apple-system, sans-serif; transition: background 0.15s, color 0.15s; }
.lang-btn.active { background: var(--text); color: #fff; }
.lang-btn:hover:not(.active) { background: var(--chip); }

/* â”€â”€ SECTION LABELS â”€â”€ */
.section-label {
  font-family: -apple-system, sans-serif;
  font-size: 0.7rem;
  font-weight: 700;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--muted);
  border-top: 1px solid var(--border);
  padding-top: 28px;
  margin-top: 40px;
  margin-bottom: 20px;
}

/* â”€â”€ HEADLINE NUMBERS â”€â”€ */
.headline-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1px;
  background: var(--border);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  margin-bottom: 8px;
}
.headline-card {
  background: var(--surface);
  padding: 20px 18px;
}
.headline-card .hl-label { font-family: -apple-system, sans-serif; font-size: 0.72rem; color: var(--muted); margin-bottom: 6px; }
.headline-card .hl-number {
  font-size: 2.2rem;
  font-weight: 700;
  line-height: 1;
  font-variant-numeric: tabular-nums;
}
.headline-card .hl-number.cn { color: var(--cn); }
.headline-card .hl-number.us { color: var(--us); }
.headline-card .hl-sub { font-family: -apple-system, sans-serif; font-size: 0.73rem; color: var(--muted); margin-top: 5px; }
.headline-card .hl-badge {
  display: inline-block;
  font-family: -apple-system, sans-serif;
  font-size: 0.65rem;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 3px;
  background: var(--chip);
  color: var(--text);
  margin-top: 6px;
}
.share-row { text-align: right; margin-bottom: 4px; }
.btn-share {
  font-family: -apple-system, sans-serif;
  font-size: 0.75rem;
  font-weight: 600;
  padding: 6px 14px;
  border: 1px solid var(--border);
  border-radius: 4px;
  background: var(--surface);
  cursor: pointer;
  color: var(--text);
  transition: background .15s;
}
.btn-share:hover { background: var(--chip); }

/* â”€â”€ TREND CHART â”€â”€ */
.chart-controls {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 14px;
  font-family: -apple-system, sans-serif;
  font-size: 0.78rem;
}
.toggle-group { display: flex; gap: 4px; }
.toggle-btn {
  padding: 4px 10px;
  border-radius: 4px;
  border: 1px solid var(--border);
  background: var(--surface);
  font-size: 0.75rem;
  font-family: -apple-system, sans-serif;
  cursor: pointer;
  color: var(--muted);
  transition: all .15s;
}
.toggle-btn.active { background: var(--text); color: #fff; border-color: var(--text); }
.toggle-btn.cn-btn.active { background: var(--cn); border-color: var(--cn); color: #fff; }
.toggle-btn.us-btn.active { background: var(--us); border-color: var(--us); color: #fff; }
.toggle-btn.row-btn.active { background: var(--row); border-color: var(--row); color: #fff; }
.ctrl-sep { color: var(--border); margin: 0 4px; }
.ctrl-label { color: var(--muted); font-size: 0.72rem; }
.chart-wrap { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px; }
.chart-axis-label { font-family: -apple-system, sans-serif; font-size: 0.7rem; color: var(--muted); margin-bottom: 6px; }
.view-toggle-wrap { display: flex; align-items: center; gap: 8px; margin-left: auto; }
.view-toggle { display: flex; gap: 0; border: 1px solid var(--border); border-radius: 4px; overflow: hidden; }
.view-toggle .toggle-btn { border: none; border-radius: 0; }

/* â”€â”€ RANKING TABLE â”€â”€ */
.rank-header {
  display: grid;
  grid-template-columns: 36px 1fr 110px 110px 80px;
  gap: 8px;
  padding: 6px 12px;
  font-family: -apple-system, sans-serif;
  font-size: 0.7rem;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  border-bottom: 1px solid var(--border);
}
.rank-row {
  display: grid;
  grid-template-columns: 36px 1fr 110px 110px 80px;
  gap: 8px;
  padding: 11px 12px;
  border-bottom: 1px solid var(--border);
  align-items: center;
  transition: background .1s;
}
.rank-row:hover { background: var(--chip); }
.rank-row:last-child { border-bottom: none; }
.rank-num { font-family: -apple-system, sans-serif; font-size: 0.82rem; color: var(--muted); font-variant-numeric: tabular-nums; }
.rank-name { font-size: 0.92rem; font-weight: 500; }
.rank-flag { margin-right: 5px; }
.rank-tokens { font-family: -apple-system, sans-serif; font-size: 0.85rem; font-variant-numeric: tabular-nums; }
.rank-bar-wrap { position: relative; height: 6px; background: var(--chip); border-radius: 3px; overflow: hidden; }
.rank-bar-fill { height: 100%; border-radius: 3px; transition: width .5s; }
.rank-confidence { font-family: -apple-system, sans-serif; font-size: 0.72rem; }
.conf-3 { color: #166534; } .conf-2 { color: #92400e; } .conf-1 { color: var(--muted); }
.tier-divider { padding: 8px 12px; font-family: -apple-system, sans-serif; font-size: 0.68rem; font-weight: 700; text-transform: uppercase; letter-spacing: .1em; color: var(--muted); background: var(--chip); border-bottom: 1px solid var(--border); }
.range-badge { font-size: 0.72rem; color: var(--muted); font-family: -apple-system, sans-serif; }
.dark-row { opacity: 0.55; }

/* â”€â”€ METHODOLOGY â”€â”€ */
.method-box {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 22px 20px;
  font-size: 0.88rem;
  line-height: 1.7;
}
.method-box h3 { font-size: 0.9rem; font-family: -apple-system, sans-serif; font-weight: 700; margin-bottom: 10px; }
.method-box p { color: var(--muted); margin-bottom: 8px; }
.method-box code { font-size: 0.82rem; background: var(--chip); padding: 1px 5px; border-radius: 3px; }

/* â”€â”€ AGENT API â”€â”€ */
.api-box {
  background: #0f0f0e;
  color: #e8e5df;
  border-radius: var(--radius);
  padding: 20px;
  font-family: 'Courier New', monospace;
  font-size: 0.78rem;
  line-height: 1.7;
  overflow-x: auto;
}
.api-comment { color: #5a5a52; }
.api-key { color: #7cb8f2; }
.api-val { color: #98d982; }
.api-str { color: #f0b96a; }

/* â”€â”€ METHOD PANELS â”€â”€ */
.show-method {
  background: none; border: none; cursor: pointer;
  color: var(--subtle); font-size: 0.75rem; padding: 0 4px;
  transition: color 0.15s; vertical-align: middle; line-height: 1;
}
.show-method:hover { color: var(--text); }
.rank-row-wrapper { border-bottom: 1px solid var(--border); }
.rank-row-wrapper:last-child { border-bottom: none; }
.rank-row-wrapper .rank-row { border-bottom: none; }
.method-panel {
  background: var(--chip);
  border-left: 3px solid var(--us);
  padding: 12px 16px;
  font-family: -apple-system, sans-serif;
  font-size: 0.78rem;
  line-height: 1.6;
}
.method-panel-inner { display: flex; flex-direction: column; gap: 4px; }
.method-source { color: var(--muted); }
.method-logic { color: var(--text); }
.method-extrapolation { color: var(--us); }
.method-correct-link { color: var(--cn); font-size: 0.72rem; text-decoration: none; }
.method-correct-link:hover { text-decoration: underline; }

/* â”€â”€ CORRECTION HISTORY BADGES â”€â”€ */
.correction-badge {
  display: inline-flex; align-items: center; gap: 3px;
  font-size: 0.62rem; font-family: -apple-system, sans-serif;
  font-weight: 600; padding: 1px 5px; border-radius: 3px;
  background: #fef3c7; color: #92400e;
  border: 1px solid #fde68a; cursor: pointer;
  margin-left: 4px; vertical-align: middle;
  transition: background 0.15s;
}
.correction-badge:hover { background: #fde68a; }
.correction-panel {
  background: #fffbeb;
  border-left: 3px solid #d97706;
  padding: 10px 14px;
  font-family: -apple-system, sans-serif;
  font-size: 0.76rem;
  line-height: 1.6;
  color: var(--muted);
}
.correction-old { color: var(--cn); text-decoration: line-through; font-weight: 600; }
.correction-new { color: #166534; font-weight: 600; }
.correction-date { color: var(--subtle); font-size: 0.68rem; }

/* â”€â”€ CHANGELOG PAGE â”€â”€ */
.changelog-entry {
  border-left: 3px solid var(--border);
  padding: 10px 16px;
  margin-bottom: 12px;
}
.changelog-entry.correction { border-left-color: #d97706; }
.changelog-entry.addition { border-left-color: #16a34a; }
.changelog-entry.update { border-left-color: var(--us); }
.changelog-tag {
  display: inline-block; font-size: 0.62rem; font-weight: 700;
  padding: 1px 6px; border-radius: 3px; font-family: -apple-system,sans-serif;
  text-transform: uppercase; letter-spacing: 0.06em; margin-right: 6px;
}
.tag-correction { background: #fef3c7; color: #92400e; }
.tag-addition { background: #dcfce7; color: #166534; }
.tag-update { background: #dbeafe; color: #1d4ed8; }
.method-conf-badge {
  display: inline-block; font-size: 0.62rem; padding: 1px 6px; border-radius: 3px;
  font-weight: 600; font-family: -apple-system, sans-serif;
}
.conf-high { background: #dcfce7; color: #166534; }
.conf-medium { background: #fef9c3; color: #854d0e; }
.conf-medium-low { background: #ffedd5; color: #9a3412; }
.conf-low-medium { background: #f3f4f6; color: #374151; }

/* â”€â”€ 2026 PROJECTIONS â”€â”€ */
.proj-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1px;
  background: var(--border);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
}
.proj-card { background: var(--surface); padding: 18px 16px; position: relative; }
.proj-label { font-family: -apple-system,sans-serif; font-size: 0.7rem; color: var(--muted); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.06em; font-weight: 700; }
.proj-number { font-size: 1.8rem; font-weight: 700; color: #d97706; line-height: 1; }
.proj-sub { font-family: -apple-system,sans-serif; font-size: 0.72rem; color: var(--muted); margin-top: 5px; }
.proj-badge { display:inline-block; font-size:0.62rem; background:#fef3c7; color:#92400e; padding:2px 6px; border-radius:3px; margin-top:5px; font-family:-apple-system,sans-serif; font-weight:600; }
.proj-method-panel {
  background: #fffbeb;
  border-left: 3px solid #d97706;
  padding: 10px 14px;
  font-family: -apple-system, sans-serif;
  font-size: 0.75rem;
  line-height: 1.6;
  color: var(--muted);
  margin-top: 8px;
  border-radius: 0 4px 4px 0;
}
@media (max-width: 640px) {
  .proj-grid { grid-template-columns: 1fr; }
  .proj-number { font-size: 1.4rem; }
}

/* â”€â”€ FOOTER â”€â”€ */
.site-footer {
  border-top: 1px solid var(--border);
  margin-top: 48px;
  padding-top: 18px;
  font-family: -apple-system, sans-serif;
  font-size: 0.72rem;
  color: var(--muted);
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 8px;
}

@media (max-width: 640px) {
  .page { padding: 0 16px 60px; }
  /* Token Economy 3-col â†’ 1-col on mobile */
  [style*="grid-template-columns:repeat(3,1fr)"] { grid-template-columns: 1fr !important; }

  /* Header: stack vertically on mobile */
  .site-header { flex-direction: column; gap: 10px; padding: 16px 0 12px; }
  .site-header-right { align-items: flex-start; flex-direction: row; flex-wrap: wrap; gap: 8px; justify-content: space-between; width: 100%; }
  .site-title-abbr { font-size: 1.9rem; }
  .site-title-full { font-size: 0.88rem; }
  .site-headline { font-size: 0.8rem; }

  /* Key numbers: 2-col on mobile */
  .headline-grid { grid-template-columns: 1fr 1fr; gap: 8px; }
  .headline-card { padding: 12px; }
  .hl-number { font-size: 1.5rem; }

  /* Chart controls: wrap */
  .chart-controls { flex-wrap: wrap; gap: 8px; }

  /* Rank table: hide DEC column */
  .rank-header, .rank-row { grid-template-columns: 28px 1fr 90px 70px; }
  .rank-header > *:nth-child(4), .rank-row > *:nth-child(4) { display: none; }

  /* Action buttons: smaller */
  .action-btn { padding: 4px 9px; font-size: 0.68rem; }

  /* Section labels */
  .section-label { font-size: 0.65rem; }
}
</style>
</head>
<body>
<div class="page">

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header class="site-header">
  <!-- LEFT: logo + tagline -->
  <div class="site-header-left">
    <div class="site-title-logo">
      <span class="site-title-abbr">GATT</span>
      <span class="site-title-sep">Â·</span>
      <span class="site-title-full">Global AI Token Tracker</span>
    </div>
    <h1 class="site-headline" id="tagline">The open index tracking the global Token Economy â€”<br>AI inference as commodity, currency, and geopolitical force.</h1>
  </div>
  <!-- RIGHT: toggle / date / stats â€” 3 lines, right-aligned -->
  <div class="site-header-right">
    <div class="lang-toggle">
      <button class="lang-btn active" id="btn-en" onclick="setLang('en')">EN</button>
      <button class="lang-btn" id="btn-zh" onclick="setLang('zh')">ä¸­</button>
    </div>
    <div><span class="live-dot"></span><span class="updated" id="header-date">Updated 2026-02-26</span> <span style="color:var(--subtle);font-size:0.68rem;font-weight:400;" id="version-tag">v0.35</span></div>
    <div>
      <span id="stat-vendors">29</span> <span class="i18n" data-en="Vendors" data-zh="å‚å•†">Vendors</span> &nbsp;Â·&nbsp;
      <span id="stat-countries">18</span> <span class="i18n" data-en="Countries" data-zh="å›½å®¶">Countries</span> &nbsp;Â·&nbsp;
      <span id="stat-models">80+</span> <span class="i18n" data-en="Models" data-zh="æ¨¡å‹">Models</span>
    </div>
  </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• WHAT CHANGED BANNER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div style="background:#fef3c7;border:1px solid #fde68a;border-radius:var(--radius);padding:12px 16px;margin-bottom:24px;font-family:-apple-system,sans-serif;font-size:0.8rem;display:flex;align-items:flex-start;gap:10px;">
  <span style="font-size:1.1rem;flex-shrink:0;">ğŸ””</span>
  <div>
    <strong style="color:#92400e;">What changed since last update (Feb 26):</strong>
    <span style="color:#78350f;"> Global total revised 136Tâ†’<strong>151T</strong> Â· Claude corrected 2.5Tâ†’10T Â· Grok &amp; Hunyuan added to tracked vendors Â· 5 CHANGELOG entries published</span>
    <a href="#changelog" style="color:#92400e;font-weight:600;margin-left:8px;text-decoration:underline;" onclick="document.querySelector('.section-label + .method-box').scrollIntoView({behavior:'smooth'});return false;">See full log â†’</a>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADLINE NUMBERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">Key Numbers â€” Feb 26, 2026</div>
<div class="headline-grid">

  <!-- 1. Daily volume â€” precise -->
  <div class="headline-card">
    <div class="hl-label">Global daily tokens</div>
    <div class="hl-number">~<span id="hl-global-tokens">151</span>T <button class="show-method" onclick="toggleMethod('global')" title="How we calculated this">â“˜</button></div>
    <div class="hl-sub">trillion tokens / day Â· Feb 2026 est. (revised)</div>
    <div class="hl-badge">â†‘ from ~13T in Feb 2025 Â· revised from 136T</div>
    <div style="font-size:.63rem;color:var(--muted);margin-top:4px;">Source: GATT synthesis Â· Epoch AI Â· ByteDance disclosures</div>
    <div class="method-panel" id="method-global" style="display:none;margin-top:10px;border-radius:4px;">
      <div class="method-panel-inner" id="method-global-inner"></div>
    </div>
  </div>

  <!-- 2. MoM growth -->
  <div class="headline-card">
    <div class="hl-label">Month-on-month growth</div>
    <div class="hl-number" style="color:#166534;">+<span id="hl-growth">12</span>%</div>
    <div class="hl-sub">Jan â†’ Feb 2026 (est.)</div>
    <div class="hl-badge">driven by Doubao 63T + OpenAI 19T</div>
    <div style="font-size:.63rem;color:var(--muted);margin-top:4px;">Source: GATT interpolation model Â· revenue proxies</div>
  </div>

  <!-- 3. China vs US -->
  <div class="headline-card">
    <div class="hl-label">China vs US</div>
    <div class="hl-number" style="font-size:1.5rem; line-height:1.2;">
      <span class="cn">~55%</span><span style="color:var(--muted);font-size:1rem;font-weight:400;"> vol</span>
      &nbsp;<span style="color:var(--muted);font-weight:300;">vs</span>&nbsp;
      <span class="us">~14%</span><span style="color:var(--muted);font-size:1rem;font-weight:400;"> val</span>
    </div>
    <div class="hl-sub">China leads volume Â· US leads compute value</div>
    <div class="hl-badge">tokenizer gap: CN models count more tokens/char</div>
    <div style="font-size:.63rem;color:var(--muted);margin-top:4px;">Source: OpenRouter State of AI Â· China NDB estimates</div>
  </div>

  <!-- 4. Top vendor -->
  <div class="headline-card">
    <div class="hl-label">Top vendor by volume</div>
    <div class="hl-number cn" style="font-size:1.7rem">Doubao</div>
    <div class="hl-sub">~63T tokens/day avg Â· ByteDance ğŸ‡¨ğŸ‡³</div>
    <div class="hl-badge">+500Ã— in 18 months Â· #1 globally</div>
    <div style="font-size:.63rem;color:var(--muted);margin-top:4px;">Source: Volcano Engine Jan 2026 avg Â· ByteDance blog</div>
  </div>

  <!-- 5. 2026 projection -->
  <div class="headline-card">
    <div class="hl-label">2026 year-end projection</div>
    <div class="hl-number" style="color:#1d4ed8;">~<span id="hl-year-proj">1000</span>T</div>
    <div class="hl-sub">trillion tokens / day by Dec 2026</div>
    <div class="hl-badge">on track Â· ~10Ã— current run rate</div>
  </div>

  <!-- 6. Dark space -->
  <div class="headline-card">
    <div class="hl-label">Data dark space</div>
    <div class="hl-number" style="color:#6f6d67;">11<span style="font-size:1rem;font-weight:400;color:var(--muted);"> / 29</span></div>
    <div class="hl-sub">vendors with zero public data</div>
    <div class="hl-badge">incl. Mistral, Baidu + others (xAI &amp; Tencent upgraded to Tier 2)</div>
  </div>

</div>
<div class="action-row">
  <div class="action-btns">
    <button class="action-btn" onclick="handleLike()" id="btn-like" title="Upvote">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3z"/><path d="M7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></svg>
      <span id="like-count">248</span>
    </button>
    <button class="action-btn" onclick="handleShare()" title="Share">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
      Share
    </button>
    <button class="action-btn" onclick="handleCorrect()" title="Suggest a correction">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
      Correct data
    </button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LIVE TOKEN COUNTER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="live-counter-card" style="
  background: #0a0a0a;
  border: 1px solid #1a2a1a;
  border-radius: var(--radius);
  padding: 24px 28px;
  margin: 16px 0 8px;
  box-shadow: 0 0 32px rgba(0,255,136,0.06);
  position: relative;
  overflow: hidden;
">
  <!-- subtle scanline effect -->
  <div style="position:absolute;top:0;left:0;right:0;bottom:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,136,0.01) 2px,rgba(0,255,136,0.01) 4px);pointer-events:none;"></div>

  <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;position:relative;">
    <!-- Left: title + number -->
    <div style="flex:1;min-width:260px;">
      <div style="font-family:-apple-system,sans-serif;font-size:0.72rem;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;color:#00ff88;margin-bottom:10px;opacity:0.8;">
        âš¡ Since you opened this page
      </div>
      <div id="live-token-count" style="
        font-family:'Courier New',monospace;
        font-size:2.8rem;
        font-weight:700;
        color:#00ff88;
        line-height:1;
        letter-spacing:-0.02em;
        text-shadow:0 0 24px rgba(0,255,136,0.4);
        font-variant-numeric:tabular-nums;
      ">0</div>
      <div style="font-family:-apple-system,sans-serif;font-size:0.72rem;color:#3a5a3a;margin-top:6px;letter-spacing:0.04em;">tokens processed globally</div>
    </div>

    <!-- Right: equivalence -->
    <div style="text-align:right;min-width:220px;">
      <div id="live-equivalence" style="
        font-family:-apple-system,sans-serif;
        font-size:0.88rem;
        color:#00cc66;
        line-height:1.5;
        min-height:2.8em;
        display:flex;
        align-items:center;
        justify-content:flex-end;
        transition:opacity 0.4s;
      ">
        <span id="live-eq-text" style="text-align:right;"></span>
      </div>
      <div style="font-family:'Courier New',monospace;font-size:0.68rem;color:#2a4a2a;margin-top:8px;letter-spacing:0.06em;">
        1,747,685 tokens/sec Â· 151T/day global
      </div>
    </div>
  </div>
</div>

<script>
// â”€â”€ LIVE TOKEN COUNTER â”€â”€
(function() {
  const RATE = 1747685; // tokens per second
  const startTime = Date.now();

  const equivalences = [
    { label: 'Ã— all books ever written', unit: 130e9 },
    { label: ' copies of English Wikipedia', unit: 4e9 },
    { label: 'Ã— GPT-3 training datasets', unit: 300e9 },
  ];
  let eqIdx = 0;
  let lastEqSwitch = Date.now();
  const EQ_INTERVAL = 5000; // 5 seconds

  function formatTokens(n) {
    if (n >= 1e12) return (n / 1e12).toFixed(2) + 'T';
    if (n >= 1e9)  return (n / 1e9).toFixed(2) + 'B';
    if (n >= 1e6)  return (n / 1e6).toFixed(2) + 'M';
    if (n >= 1e3)  return (n / 1e3).toFixed(1) + 'K';
    return Math.floor(n).toLocaleString();
  }

  const countEl = document.getElementById('live-token-count');
  const eqTextEl = document.getElementById('live-eq-text');
  const eqWrapEl = document.getElementById('live-equivalence');

  function updateCounter() {
    const elapsed = (Date.now() - startTime) / 1000;
    const tokens = elapsed * RATE;

    // Update main counter
    if (countEl) {
      if (tokens >= 1e12) {
        countEl.textContent = (tokens / 1e12).toFixed(3) + ' T';
      } else if (tokens >= 1e9) {
        countEl.textContent = (tokens / 1e9).toFixed(2) + ' B';
      } else if (tokens >= 1e6) {
        countEl.textContent = (tokens / 1e6).toFixed(1) + ' M';
      } else {
        countEl.textContent = Math.floor(tokens).toLocaleString();
      }
    }

    // Rotate equivalences every 5 seconds
    const now = Date.now();
    if (now - lastEqSwitch > EQ_INTERVAL) {
      eqIdx = (eqIdx + 1) % equivalences.length;
      lastEqSwitch = now;
      if (eqWrapEl) {
        eqWrapEl.style.opacity = '0';
        setTimeout(() => { eqWrapEl.style.opacity = '1'; }, 400);
      }
    }

    // Update equivalence text
    if (eqTextEl) {
      const eq = equivalences[eqIdx];
      const x = (tokens / eq.unit).toFixed(2);
      eqTextEl.textContent = '= ' + x + eq.label;
    }

    requestAnimationFrame(updateCounter);
  }

  // Init equivalence text immediately
  if (eqTextEl) {
    const eq = equivalences[0];
    eqTextEl.textContent = '= 0.00' + eq.label;
  }

  requestAnimationFrame(updateCounter);
})();
</script>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SPOTLIGHT: DOUBAO VS GEMINI â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">Spotlight â€” The Race at the Top: Doubao vs Gemini</div>
<div style="background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
  <div style="display:grid;grid-template-columns:1fr auto 1fr;" class="vs-grid">
    <div style="padding:20px;background:linear-gradient(135deg,#fff5f5 0%,var(--surface) 100%);">
      <div style="font-size:0.7rem;font-weight:700;text-transform:uppercase;letter-spacing:0.1em;color:#c0392b;margin-bottom:8px;font-family:-apple-system,sans-serif;">ğŸ‡¨ğŸ‡³ #1 by Volume</div>
      <div style="font-size:1.8rem;font-weight:900;color:#c0392b;font-family:-apple-system,sans-serif;">Doubao</div>
      <div style="font-size:0.82rem;color:var(--muted);font-family:-apple-system,sans-serif;margin-bottom:12px;">ByteDance Â· Volcano Engine</div>
      <div style="display:flex;flex-direction:column;gap:8px;font-family:-apple-system,sans-serif;font-size:0.82rem;">
        <div><span style="color:var(--muted);">Volume:</span> <strong>63T/day</strong> <span style="font-size:0.7rem;color:#22c55e;">+26% from Dec</span></div>
        <div><span style="color:var(--muted);">Compute value:</span> <strong>~$8.8M/day</strong></div>
        <div><span style="color:var(--muted);">Price:</span> <strong>~$0.14/M tokens</strong></div>
        <div><span style="color:var(--muted);">Growth:</span> <strong>+33x in 12mo</strong></div>
        <div><span style="color:var(--muted);">Disclosure:</span> <strong style="color:#166534;">âœ“ Official</strong></div>
      </div>
      <div style="margin-top:14px;background:#fef2f2;border-radius:6px;padding:10px 12px;font-size:0.75rem;color:#9a3412;font-family:-apple-system,sans-serif;"><strong>The volume king.</strong> Doubao processes more tokens than the entire US market combined â€” but at 1/10th the price per token.</div>
    </div>
    <div style="display:flex;align-items:center;justify-content:center;padding:0 16px;background:var(--chip);"><div style="font-size:1.4rem;font-weight:900;color:var(--subtle);font-family:Georgia,serif;">VS</div></div>
    <div style="padding:20px;background:linear-gradient(135deg,#eff6ff 0%,var(--surface) 100%);">
      <div style="font-size:0.7rem;font-weight:700;text-transform:uppercase;letter-spacing:0.1em;color:#2563eb;margin-bottom:8px;font-family:-apple-system,sans-serif;">ğŸ‡ºğŸ‡¸ #1 by Value</div>
      <div style="font-size:1.8rem;font-weight:900;color:#2563eb;font-family:-apple-system,sans-serif;">Gemini</div>
      <div style="font-size:0.82rem;color:var(--muted);font-family:-apple-system,sans-serif;margin-bottom:12px;">Google / Alphabet Â· All Surfaces</div>
      <div style="display:flex;flex-direction:column;gap:8px;font-family:-apple-system,sans-serif;font-size:0.82rem;">
        <div><span style="color:var(--muted);">Volume:</span> <strong>~50T/day</strong></div>
        <div><span style="color:var(--muted);">Compute value:</span> <strong>~$53M/day</strong></div>
        <div><span style="color:var(--muted);">Price:</span> <strong>~$1.06/M tokens</strong></div>
        <div><span style="color:var(--muted);">Surfaces:</span> <strong>Search + Workspace + API</strong></div>
        <div><span style="color:var(--muted);">Disclosure:</span> <strong style="color:#92400e;">~ Earnings (Oct 2025)</strong></div>
      </div>
      <div style="margin-top:14px;background:#eff6ff;border-radius:6px;padding:10px 12px;font-size:0.75rem;color:#1e40af;font-family:-apple-system,sans-serif;"><strong>The value king.</strong> Gemini generates 6x more dollar value per token than Doubao. Same token count, 5x more revenue â€” the DEC gap in one comparison.</div>
    </div>
  </div>
  <div style="border-top:1px solid var(--border);padding:12px 20px;font-family:-apple-system,sans-serif;font-size:0.75rem;color:var(--muted);display:flex;justify-content:space-between;flex-wrap:wrap;gap:8px;">
    <span>Value ratio: Gemini generates <strong>6x</strong> more compute value per token than Doubao</span>
    <a href="https://twitter.com/intent/tweet?text=Doubao%3A+63T+tokens%2Fday+%40+%240.14%2FM+%3D+%248.8M%2Fday.+Gemini%3A+50T+tokens%2Fday+%40+%241.06%2FM+%3D+%2453M%2Fday.+Same+token+count%2C+6x+value+gap.+This+is+the+Token+Economy.+https%3A%2F%2Fgf691271.github.io%2Fgatt%2F" target="_blank" style="color:var(--us);font-weight:600;text-decoration:none;font-size:0.72rem;">X Share this comparison â†’</a>
  </div>
</div>
<style>@media (max-width:640px){ .vs-grid { grid-template-columns: 1fr !important; } }</style>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• 2026 PROJECTIONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">2026 Projections â€” End of Year</div>
<div class="proj-grid">

  <div class="proj-card">
    <div class="proj-label">Global Daily Tokens by Dec 2026</div>
    <div class="proj-number">~800Tâ€“1.2PT</div>
    <div class="proj-sub">per day by December 2026</div>
    <div class="proj-badge">At current +18%/mo growth rate</div>
    <button class="show-method" onclick="toggleProjMethod('proj-global')" title="Projection logic" style="margin-top:8px;display:block;">â“˜ See projection logic</button>
    <div class="proj-method-panel" id="proj-global" style="display:none">
      At +18%/mo compounded from Feb 2026 (151T/day), Dec 2026 = 136 Ã— 1.18^10 â‰ˆ 800T. At +22%/mo (upper) â‰ˆ 1.2PT. Growth driven by Doubao expansion, Apple Intelligence scale-up, and OpenAI o3 rollout. Key risk: actual growth could decelerate to +10%/mo â†’ ~350T/day.
    </div>
  </div>

  <div class="proj-card">
    <div class="proj-label">Top Vendor (Projected)</div>
    <div class="proj-number">Doubao</div>
    <div class="proj-sub">ByteDance Â· ~180T/day by Dec 2026</div>
    <div class="proj-badge">If +8%/mo growth holds</div>
    <button class="show-method" onclick="toggleProjMethod('proj-doubao')" title="Projection logic" style="margin-top:8px;display:block;">â“˜ See projection logic</button>
    <div class="proj-method-panel" id="proj-doubao" style="display:none">
      Doubao at 63T/day (Jan 2026) growing at +8%/mo â†’ 63 Ã— 1.08^11 â‰ˆ 144T by Dec 2026. ByteDance has publicly committed to continued Volcano Engine expansion and Doubao product integrations across TikTok's 170-country footprint. Upside: new markets + enterprise API rollout could push to 200T+.
    </div>
  </div>

  <div class="proj-card">
    <div class="proj-label">China vs US Gap</div>
    <div class="proj-number" style="font-size:1.3rem;color:var(--text);">Narrowing vol Â· Widening val</div>
    <div class="proj-sub">CN: 62% vol / US: 28% val â†’ projected CN: 58% / US: 22%</div>
    <div class="proj-badge">DEC gap persists â€” premium pricing advantage</div>
    <button class="show-method" onclick="toggleProjMethod('proj-gap')" title="Projection logic" style="margin-top:8px;display:block;">â“˜ See projection logic</button>
    <div class="proj-method-panel" id="proj-gap" style="display:none">
      Volume gap narrows as US models (Claude, GPT) grow faster (+14%/mo) than Doubao (+8%/mo). But DEC gap widens: US API pricing ($1â€“6/M tokens) vs China ($0.10â€“0.30/M) means US generates 4â€“8Ã— more dollar value per token. By Dec 2026, CN may lead volume 58% but US still commands ~70%+ of compute dollar value.
    </div>
  </div>

  <div class="proj-card">
    <div class="proj-label">Biggest Wild Card</div>
    <div class="proj-number" style="font-size:1.5rem;color:#7c3aed;">Apple Intelligence</div>
    <div class="proj-sub">Could add 50â€“200T/day if iPhone AI features scale</div>
    <div class="proj-badge">~2.2B iPhone users Â· on-device + cloud hybrid</div>
    <button class="show-method" onclick="toggleProjMethod('proj-apple')" title="Projection logic" style="margin-top:8px;display:block;">â“˜ See projection logic</button>
    <div class="proj-method-panel" id="proj-apple" style="display:none">
      Apple has 2.2B active devices. If 10% use AI features daily at 1M tokens/day = 220T/day â€” larger than any current vendor. Apple doesn't disclose AI usage data (Tier 3 dark zone). Conservative estimate (1% active AI users, 500K tokens/day) = ~11T/day by H2 2026. Wild card: Apple could silently become the #1 AI compute node on Earth by token count without any public disclosure.
    </div>
  </div>

</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TREND CHART â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">Daily Trend â€” Token Consumption Over Time</div>
<!-- Key Events Timeline (shown below chart) -->
<div id="key-event-info" style="display:none;background:#fffbeb;border:1px solid #fde68a;border-radius:var(--radius);padding:14px 16px;margin-bottom:12px;font-family:-apple-system,sans-serif;font-size:0.82rem;">
  <button onclick="document.getElementById('key-event-info').style.display='none'" style="float:right;background:none;border:none;cursor:pointer;font-size:1rem;color:var(--muted);">Ã—</button>
  <strong id="key-event-title" style="color:#92400e;"></strong>
  <p id="key-event-desc" style="color:var(--muted);margin-top:6px;line-height:1.6;"></p>
</div>
<div class="chart-controls">
  <div class="toggle-group">
    <button class="toggle-btn cn-btn active" id="btn-cn" onclick="toggleSeries('cn')">ğŸ‡¨ğŸ‡³ China</button>
    <button class="toggle-btn us-btn active" id="btn-us" onclick="toggleSeries('us')">ğŸ‡ºğŸ‡¸ US</button>
    <button class="toggle-btn row-btn active" id="btn-row" onclick="toggleSeries('row')">ğŸŒ Rest of World</button>
  </div>
  <div class="view-toggle">
    <button class="toggle-btn active" id="view-tokens" onclick="setView('tokens')">T Tokens</button>
    <button class="toggle-btn" id="view-dec" onclick="setView('dec')">T Tokens (Adjusted)</button>
  </div>
</div>
<div class="chart-wrap">
  <canvas id="trendChart" height="200"></canvas>
</div>

<!-- Key Events Timeline below chart -->
<div style="margin-top:12px;font-family:-apple-system,sans-serif;font-size:0.72rem;color:var(--muted);">
  <strong style="text-transform:uppercase;letter-spacing:0.06em;font-size:0.65rem;">Key events:</strong>
  <span style="margin-left:6px;">Click to learn more â†’</span>
  <div style="display:flex;flex-wrap:wrap;gap:6px;margin-top:8px;">
    <button onclick="showKeyEvent('doubao4t')" style="border:1px solid #fca5a5;background:#fef2f2;color:#c0392b;border-radius:4px;padding:3px 8px;font-size:0.7rem;font-family:-apple-system,sans-serif;cursor:pointer;font-weight:600;">Dec 2024 Â· Doubao 4T/day</button>
    <button onclick="showKeyEvent('deepseekr1')" style="border:1px solid #bfdbfe;background:#eff6ff;color:#2563eb;border-radius:4px;padding:3px 8px;font-size:0.7rem;font-family:-apple-system,sans-serif;cursor:pointer;font-weight:600;">Jan 2025 Â· DeepSeek R1 release</button>
    <button onclick="showKeyEvent('doubao50t')" style="border:1px solid #fca5a5;background:#fef2f2;color:#c0392b;border-radius:4px;padding:3px 8px;font-size:0.7rem;font-family:-apple-system,sans-serif;cursor:pointer;font-weight:600;">Dec 2025 Â· Doubao 50-63T/day</button>
    <button onclick="showKeyEvent('gemini35t')" style="border:1px solid #a7f3d0;background:#f0fdf4;color:#166534;border-radius:4px;padding:3px 8px;font-size:0.7rem;font-family:-apple-system,sans-serif;cursor:pointer;font-weight:600;">Jul 2025 Â· Google Gemini 35T/day</button>
    <button onclick="showKeyEvent('claudecorr')" style="border:1px solid #e9d5ff;background:#faf5ff;color:#7c3aed;border-radius:4px;padding:3px 8px;font-size:0.7rem;font-family:-apple-system,sans-serif;cursor:pointer;font-weight:600;">Feb 2026 Â· Claude correction 2.5Tâ†’10T</button>
  </div>
</div>

<script>
const keyEvents = {
  doubao4t: {
    title: 'Dec 2024 â€” Doubao crosses 4T tokens/day',
    desc: 'ByteDance\'s Doubao AI assistant crossed 4T tokens/day in December 2024, up from just 120B/day in May 2024 â€” a 33Ã— increase in 7 months. This was the first public confirmation that a Chinese AI product had scaled to a level comparable with OpenAI. It marked the beginning of China\'s AI token dominance.'
  },
  deepseekr1: {
    title: 'Jan 2025 â€” DeepSeek R1 shocks the world',
    desc: 'DeepSeek released R1 on January 20, 2025, claiming performance on par with OpenAI o1 at a fraction of the training cost. NVIDIA lost $600B in market cap in a single day. The release supercharged global developer adoption of open-weight Chinese models and drove a surge in token consumption globally.'
  },
  doubao50t: {
    title: 'Dec 2025 â€“ Jan 2026 â€” Doubao 50T â†’ 63T/day',
    desc: 'ByteDance disclosed that Doubao processed 50T tokens/day on average in December 2025, rising to 63T/day average in January 2026. At this level, Doubao alone accounts for ~42% of all estimated global AI token consumption â€” more than the entire US market combined. Volcano Engine officially confirmed the January figure.'
  },
  gemini35t: {
    title: 'Jul 2025 â€” Google Gemini All Surfaces reaches 35T/day',
    desc: 'At Google Cloud Next 2025, Sundar Pichai disclosed that Gemini across all surfaces (Search AI, Workspace, API, Pixel) was processing 1 quadrillion tokens per month, equivalent to ~33T/day. This was the first "All Surfaces" disclosure, meaning Google\'s total AI token consumption was far larger than API-only estimates had suggested.'
  },
  claudecorr: {
    title: 'Feb 2026 â€” Claude corrected from 2.5T to 10T/day',
    desc: 'GATT corrected the Claude estimate from 2.5T to ~10T/day after Bloomberg confirmed Anthropic reached $14B ARR by February 2026 (up from ~$1B in late 2024 â€” a 14Ã— increase). Cross-validation with Anthropic\'s own 820M API requests/day figure (Jun 2025) supported the higher estimate. The 2.5T figure had relied on a stale 2024 ARR proxy.'
  }
};
function showKeyEvent(id) {
  const ev = keyEvents[id];
  if (!ev) return;
  const box = document.getElementById('key-event-info');
  document.getElementById('key-event-title').textContent = ev.title;
  document.getElementById('key-event-desc').textContent = ev.desc;
  box.style.display = 'block';
  box.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}
</script>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RANKING â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">Vendor Ranking â€” Daily Tokens</div>
<div style="background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;" id="rankTable">
  <div class="rank-header">
    <div>#</div><div>Vendor</div><div>T Tokens/day</div><div>DEC $/day</div><div>Source</div>
  </div>
  <!-- rows injected by JS -->
</div>

<div style="font-family:-apple-system,sans-serif;font-size:0.68rem;color:var(--muted);margin-top:8px;padding:0 4px;display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
  <span>Data freshness:</span>
  <span><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#22c55e;margin-right:3px;vertical-align:middle;"></span>â‰¤30 days</span>
  <span><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#f59e0b;margin-right:3px;vertical-align:middle;"></span>31â€“90 days</span>
  <span><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#ef4444;margin-right:3px;vertical-align:middle;"></span>&gt;90 days (likely stale)</span>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• COUNTRY RANKING â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">Country Ranking â€” Token Volume Share</div>
<div style="background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;padding:4px 0" id="countryRank">
  <!-- Static country data with confidence labels (populated here AND by JS fallback) -->
</div>
<div style="font-family:-apple-system,sans-serif;font-size:0.7rem;color:var(--muted);margin-top:8px;padding:0 4px;">
  âš ï¸ Country shares are modeled estimates based on vendor HQ + known deployment geography. Confidence: Lowâ€“Medium.
  Sources: China NDB 2025 Â· OpenRouter State of AI Â· GATT methodology.
</div>

<!-- Rising Powers Spotlight -->
<div class="section-label">Rising Powers â€” The Next Billion Tokens</div>
<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;" class="rising-powers-grid">

  <div style="background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:16px 14px;">
    <div style="font-size:1.6rem;margin-bottom:4px;">ğŸ‡®ğŸ‡³</div>
    <div style="font-weight:700;font-size:0.95rem;margin-bottom:6px;">India</div>
    <div style="font-size:0.75rem;color:var(--muted);line-height:1.6;margin-bottom:10px;">
      Today: 0.6% of global tokens. But India has 1.4 billion people, the world's largest English-speaking tech workforce, and a national AI mission backed by $1B+ in government compute.<br><br>
      <strong style="color:var(--text);">The question isn't whether India rises. It's how fast.</strong> Sarvam AI, Krutrim, and BharatGPT are building the stack. When Indian-language models hit scale â€” Hindi, Bengali, Tamil â€” this number moves fast.
    </div>
    <div style="font-size:0.68rem;background:#fef9c3;color:#92400e;padding:6px 8px;border-radius:4px;font-weight:600;">
      ğŸ¯ 2026 projection: 1.5â€“3% of global volume if govt AI infra deploys on schedule
    </div>
    <a href="https://twitter.com/intent/tweet?text=India%20generates%20just%200.6%25%20of%20global%20AI%20tokens%20today.%20But%201.4B%20people%2C%20IIT%20talent%2C%20and%20a%20national%20AI%20mission%20say%20that%27s%20about%20to%20change.%20%F0%9F%87%AE%F0%9F%87%B3%20Data%3A%20https%3A%2F%2Fgf691271.github.io%2Fgatt%2F%20%23IndiaAI%20%23TokenEconomy" target="_blank" style="display:inline-flex;align-items:center;gap:5px;margin-top:10px;padding:6px 12px;background:#0f1419;color:#fff;border-radius:16px;text-decoration:none;font-size:0.72rem;font-weight:600;font-family:-apple-system,sans-serif;">ğ• Share India's AI story</a>
  </div>

  <div style="background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:16px 14px;">
    <div style="font-size:1.6rem;margin-bottom:4px;">ğŸ‡¸ğŸ‡¦</div>
    <div style="font-weight:700;font-size:0.95rem;margin-bottom:6px;">Saudi Arabia</div>
    <div style="font-size:0.75rem;color:var(--muted);line-height:1.6;margin-bottom:10px;">
      The Arab world's AI capital race is already underway. Saudi Arabia is spending $100B+ on AI infrastructure through Vision 2030 and NEOM. SDAIA's Arabic NLP program is state-funded at a scale that dwarfs most national AI budgets.<br><br>
      <strong style="color:var(--text);">Arabic is 420M speakers and growing.</strong> Arabic tokenizers are inefficient in current LLMs â€” the first Arabic-native model at scale will unlock massive latent demand.
    </div>
    <div style="font-size:0.68rem;background:#fef9c3;color:#92400e;padding:6px 8px;border-radius:4px;font-weight:600;">
      ğŸ¯ Arabic NLP fastest-growing region in GATT tracking. Watch for Aramco AI, SDAIA Hala announcements.
    </div>
    <a href="https://twitter.com/intent/tweet?text=Arabic%20NLP%20is%20the%20fastest-growing%20AI%20language%20segment.%20Saudi%20Arabia%3A%20%24100B%2B%20AI%20spend%2C%20420M%20Arabic%20speakers%2C%20and%20current%20LLMs%20still%20can%27t%20serve%20them%20well.%20%F0%9F%87%B8%F0%9F%87%A6%20https%3A%2F%2Fgf691271.github.io%2Fgatt%2F%20%23ArabicAI%20%23TokenEconomy" target="_blank" style="display:inline-flex;align-items:center;gap:5px;margin-top:10px;padding:6px 12px;background:#0f1419;color:#fff;border-radius:16px;text-decoration:none;font-size:0.72rem;font-weight:600;font-family:-apple-system,sans-serif;">ğ• Share the Arab AI story</a>
  </div>

  <div style="background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:16px 14px;">
    <div style="font-size:1.6rem;margin-bottom:4px;">ğŸ‡§ğŸ‡·</div>
    <div style="font-weight:700;font-size:0.95rem;margin-bottom:6px;">Brazil</div>
    <div style="font-size:0.75rem;color:var(--muted);line-height:1.6;margin-bottom:10px;">
      215 million people. The 9th largest economy. The internet's largest Portuguese-speaking market. And right now, Brazil generates just 0.4% of global AI tokens.<br><br>
      <strong style="color:var(--text);">That gap is opportunity.</strong> Maritaca AI and SabiÃ¡ LLM are building Brazilian Portuguese models. President Lula's AI investment pledge ($5B+ over 4 years) is the catalyst. Latin America's AI wave starts here.
    </div>
    <div style="font-size:0.68rem;background:#dcfce7;color:#166534;padding:6px 8px;border-radius:4px;font-weight:600;">
      ğŸ¯ LatAm's sleeping giant. Watch for Petrobras AI, Embrapa data licensing, federal university LLMs.
    </div>
    <a href="https://twitter.com/intent/tweet?text=Brazil%3A%200.4%25%20of%20global%20AI%20tokens.%20215M%20people.%209th%20largest%20economy.%20Biggest%20Portuguese-speaking%20internet.%20LatAm%27s%20AI%20wave%20is%20about%20to%20start%20here.%20%F0%9F%87%A7%F0%9F%87%B7%20https%3A%2F%2Fgf691271.github.io%2Fgatt%2F%20%23BrazilAI%20%23TokenEconomy" target="_blank" style="display:inline-flex;align-items:center;gap:5px;margin-top:10px;padding:6px 12px;background:#22863a;color:#fff;border-radius:16px;text-decoration:none;font-size:0.72rem;font-weight:600;font-family:-apple-system,sans-serif;">ğ• Share Brazil's AI story</a>
  </div>

</div>
<style>
@media (max-width:640px) { .rising-powers-grid { grid-template-columns: 1fr !important; } }
</style>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DATA SOURCES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">Data Sources</div>
<div class="method-box" style="font-family:-apple-system,sans-serif;font-size:0.82rem;">
  <p style="margin-bottom:10px;color:var(--muted);font-size:0.78rem;">All figures are synthesized from public disclosures, third-party analyses, and GATT proprietary estimation methodology. No figures are financial or investment advice.</p>
  <table style="width:100%;border-collapse:collapse;">
    <thead>
      <tr style="font-size:0.72rem;font-weight:700;text-transform:uppercase;letter-spacing:0.05em;color:var(--muted);">
        <td style="padding:6px 0;border-bottom:1px solid var(--border);">Source</td>
        <td style="padding:6px 8px;border-bottom:1px solid var(--border);">Type</td>
        <td style="padding:6px 0;border-bottom:1px solid var(--border);">Vendors / Data</td>
        <td style="padding:6px 0;border-bottom:1px solid var(--border);">Confidence</td>
      </tr>
    </thead>
    <tbody style="font-size:0.78rem;">
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px 0;font-weight:600;">ByteDance / Volcano Engine disclosures</td>
        <td style="padding:8px;color:var(--muted);">Official blog</td>
        <td style="padding:8px 0;color:var(--muted);">Doubao 50T Dec-2025, 63T Jan-2026 avg</td>
        <td style="padding:8px 0;"><span style="color:#166534;font-weight:600;">High</span></td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px 0;font-weight:600;">Google Cloud Next 2025 keynote</td>
        <td style="padding:8px;color:var(--muted);">Earnings / event</td>
        <td style="padding:8px 0;color:var(--muted);">Gemini API 35T tokens/day Jul-2025</td>
        <td style="padding:8px 0;"><span style="color:#166534;font-weight:600;">High</span></td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px 0;font-weight:600;">Epoch AI compute analysis</td>
        <td style="padding:8px;color:var(--muted);">Third-party est.</td>
        <td style="padding:8px 0;color:var(--muted);">OpenAI ~19T/day (compute + usage proxy)</td>
        <td style="padding:8px 0;"><span style="color:#92400e;font-weight:600;">Medium</span></td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px 0;font-weight:600;">Anthropic $14B ARR (Feb 2026) + 820M API req/day (Jun 2025)</td>
        <td style="padding:8px;color:var(--muted);">Revenue Ã· price + request proxy</td>
        <td style="padding:8px 0;color:var(--muted);">Claude ~10T/day est. (prev. 2.5T used stale $3B ARR)</td>
        <td style="padding:8px 0;"><span style="color:#92400e;font-weight:600;">Medium</span></td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px 0;font-weight:600;">OpenRouter State of AI (weekly)</td>
        <td style="padding:8px;color:var(--muted);">Platform data</td>
        <td style="padding:8px 0;color:var(--muted);">API-accessible model traffic calibration</td>
        <td style="padding:8px 0;"><span style="color:#166534;font-weight:600;">High</span></td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px 0;font-weight:600;">China National Data Bureau (NDB)</td>
        <td style="padding:8px;color:var(--muted);">Official data</td>
        <td style="padding:8px 0;color:var(--muted);">China total >30T/day by mid-2025</td>
        <td style="padding:8px 0;"><span style="color:#166534;font-weight:600;">High</span></td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px 0;font-weight:600;">Industry analysts (Goldman Sachs, Morgan Stanley)</td>
        <td style="padding:8px;color:var(--muted);">Analyst est.</td>
        <td style="padding:8px 0;color:var(--muted);">AI inference market $106â€“126B in 2025</td>
        <td style="padding:8px 0;"><span style="color:#92400e;font-weight:600;">Medium</span></td>
      </tr>
      <tr>
        <td style="padding:8px 0;font-weight:600;">GATT proprietary methodology</td>
        <td style="padding:8px;color:var(--muted);">Synthesis</td>
        <td style="padding:8px 0;color:var(--muted);">Interpolation + DEC normalization + multi-source fusion</td>
        <td style="padding:8px 0;"><span style="color:var(--muted);font-weight:600;">Model est.</span></td>
      </tr>
    </tbody>
  </table>
  <p style="margin-top:12px;font-size:0.72rem;color:var(--muted);">Last data refresh: 2026-02-26. If you have better data, <a href="https://github.com/gf691271/gatt/issues/new?title=Data+correction&labels=data" style="color:inherit;text-decoration:underline;">submit a correction â†’</a></p>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• METHODOLOGY â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">Methodology â€” How We Estimate</div>
<div class="method-box">
  <h3>The Daily Estimation Model</h3>
  <p>No single source publishes daily token counts. This tracker synthesizes five evidence layers to produce daily-granularity estimates:</p>
  <p><strong>1. Anchor events</strong> â€” Official disclosures (earnings calls, press releases, developer conferences) provide point-in-time snapshots.</p>
  <p><strong>2. Growth interpolation</strong> â€” Between anchors, we apply compound daily growth rates derived from public revenue trends, model release cadence, and platform activity signals.</p>
  <p><strong>3. Revenue back-calculation</strong> â€” For vendors with known revenue but no token disclosures, we reverse-engineer volumes using published API pricing.</p>
  <p><strong>4. OpenRouter signal</strong> â€” Platform-level weekly token data provides real-time calibration for API-accessible models.</p>
  <p><strong>5. DEC normalization</strong> â€” <code>DEC = tokens Ã— price_per_1M</code>. This adjusts for tokenizer efficiency differences (Chinese text encodes fewer tokens per character in GPT-style tokenizers vs. native Chinese models). Same data, different scoreboard.</p>
  <p style="margin-top:12px;font-style:italic;color:var(--muted);">The gap between token-count rank and DEC rank is the story: China leads by volume, US leads by compute value. That gap is this tracker's thesis.</p>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• EXPORT DATA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">Export Data â€” Download for Analysis</div>
<div class="method-box" style="font-family:-apple-system,sans-serif;">
  <p style="font-size:0.78rem;color:var(--muted);margin-bottom:16px;">All GATT data is open (CC BY 4.0). Download in your preferred format for research, journalism, or analysis.</p>
  <div style="display:flex;flex-wrap:wrap;gap:10px;">
    <button onclick="downloadCSV()" style="display:inline-flex;align-items:center;gap:6px;padding:9px 18px;background:var(--surface);border:1.5px solid var(--border);border-radius:6px;font-size:0.82rem;font-weight:600;cursor:pointer;color:var(--text);font-family:-apple-system,sans-serif;transition:border-color .15s;" onmouseover="this.style.borderColor='var(--text)'" onmouseout="this.style.borderColor='var(--border)'">
      ğŸ“Š Download CSV (vendors + tokens + DEC)
    </button>
    <a href="data/tci-latest.json" download="tci-latest.json" style="display:inline-flex;align-items:center;gap:6px;padding:9px 18px;background:var(--surface);border:1.5px solid var(--border);border-radius:6px;font-size:0.82rem;font-weight:600;cursor:pointer;color:var(--text);font-family:-apple-system,sans-serif;text-decoration:none;">
      { } Download JSON (full structured data)
    </a>
    <button onclick="downloadMD()" style="display:inline-flex;align-items:center;gap:6px;padding:9px 18px;background:var(--surface);border:1.5px solid var(--border);border-radius:6px;font-size:0.82rem;font-weight:600;cursor:pointer;color:var(--text);font-family:-apple-system,sans-serif;transition:border-color .15s;" onmouseover="this.style.borderColor='var(--text)'" onmouseout="this.style.borderColor='var(--border)'">
      ğŸ“ Download Markdown (journalist-ready)
    </button>
  </div>
  <p style="font-size:0.72rem;color:var(--subtle);margin-top:12px;">Attribution required: "Source: GATT Global AI Token Tracker (gf691271.github.io/gatt) by Frank Gao, CC BY 4.0"</p>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• AGENT API â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">For AI Agents â€” Machine-Readable Data Layer</div>
<div class="api-box">
<span class="api-comment">// Fetch structured data â€” zero LLM calls required</span>
<span class="api-comment">// Live endpoint (updated with each release):</span>
GET https://gf691271.github.io/gatt/data/tci-latest.json

<span class="api-comment">// Response schema</span>
{
  <span class="api-key">"meta"</span>: { <span class="api-key">"updated"</span>: <span class="api-str">"2026-02-26"</span>, <span class="api-key">"methodology"</span>: <span class="api-str">"DEC = tokens Ã— price/1M"</span> },
  <span class="api-key">"summary"</span>: {
    <span class="api-key">"global_daily_tokens_T"</span>: <span class="api-val">136</span>,
    <span class="api-key">"china_share_pct"</span>: <span class="api-val">55</span>,
    <span class="api-key">"confirmed_data"</span>: <span class="api-val">11</span>,
    <span class="api-key">"dark_zone"</span>: <span class="api-val">11</span>
  },
  <span class="api-key">"vendors"</span>: [ <span class="api-comment">/* 30 vendors, tier 1/2/3, confidence 0-3 */</span> ]
}

<span class="api-comment">// Confidence scale: 3=earnings/official Â· 2=media Â· 1=estimated Â· 0=unknown</span>
<span class="api-comment">// Tier: 1=confirmed Â· 2=range estimate Â· 3=data dark zone</span>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SHARE THIS DATA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">Share This Data</div>
<div class="method-box" style="font-family:-apple-system,sans-serif;">
  <div style="display:flex;flex-wrap:wrap;gap:10px;margin-bottom:16px;">
    <a href="https://twitter.com/intent/tweet?text=In%20the%20time%20it%20took%20me%20to%20read%20this%20tweet%20(~15s)%2C%2026%20billion%20AI%20tokens%20were%20processed%20globally%20%F0%9F%A4%AF%0ADoubao%20alone%20%3D%2063T%2Fday.%20The%20Token%20Economy%20is%20real.%0ALive%20counter%20%E2%86%92%20https%3A%2F%2Fgf691271.github.io%2Fgatt%2F%20via%20%40goghxiang" target="_blank" style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:#0f1419;color:#fff;border-radius:20px;text-decoration:none;font-size:0.82rem;font-weight:600;">
      ğ• Share on X
    </a>
    <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fgf691271.github.io%2Fgatt%2F" target="_blank" style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:#0a66c2;color:#fff;border-radius:20px;text-decoration:none;font-size:0.82rem;font-weight:600;">
      in Share on LinkedIn
    </a>
    <button onclick="copyShareText()" id="btn-copy-share" style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:var(--chip);color:var(--text);border:1px solid var(--border);border-radius:20px;font-size:0.82rem;font-weight:600;cursor:pointer;">
      ğŸ“‹ Copy shareable text
    </button>
  </div>
  <div style="background:var(--chip);padding:14px 16px;border-radius:6px;font-size:0.78rem;color:var(--muted);line-height:1.6;">
    <strong style="color:var(--text);">Pre-written tweet:</strong><br>
    "In the time it took me to read this tweet (~15s), 26 billion AI tokens were processed globally ğŸ¤¯<br>
    Doubao alone = 63T/day. The Token Economy is real.<br>
    Live counter â†’ https://gf691271.github.io/gatt/ via @goghxiang"
  </div>
  <div style="margin-top:16px;padding:14px 16px;border:1px dashed var(--border);border-radius:6px;">
    <strong style="font-size:0.85rem;">ğŸ“¬ Subscribe to weekly updates</strong>
    <p style="font-size:0.78rem;color:var(--muted);margin:6px 0 0;">Get the latest Token Economy data every Monday.<br>
    Email <a href="mailto:goghxiang@gmail.com?subject=Subscribe%20to%20GATT%20Weekly" style="color:var(--us);font-weight:600;">goghxiang@gmail.com</a> with subject "Subscribe"</p>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• WATCH LIST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">Watch List â€” Numbers to Track Next</div>
<div style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;" class="watchlist-grid">

  <div style="background:var(--surface);border:1px solid #fde68a;border-left:4px solid #d97706;border-radius:var(--radius);padding:16px 14px;">
    <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px;">
      <div>
        <span style="font-size:0.68rem;font-weight:700;text-transform:uppercase;letter-spacing:0.08em;color:#92400e;font-family:-apple-system,sans-serif;">ğŸ”¥ Imminent</span>
        <div style="font-weight:700;font-size:1rem;margin-top:3px;">Doubao crosses 100T/day</div>
      </div>
      <span style="font-size:0.72rem;color:#92400e;font-family:-apple-system,sans-serif;font-weight:600;background:#fef3c7;padding:3px 8px;border-radius:12px;">~Q3 2026</span>
    </div>
    <p style="font-size:0.78rem;color:var(--muted);line-height:1.6;font-family:-apple-system,sans-serif;">At +8%/mo from 63T: crosses 100T by September 2026. This would make Doubao the first AI service in history to process 100T tokens/day â€” equivalent to 10Ã— all of 2025's internet search volume.</p>
    <div style="font-size:0.7rem;color:var(--subtle);font-family:-apple-system,sans-serif;margin-top:6px;">Watch: Volcano Engine quarterly disclosures Â· ByteDance earnings</div>
  </div>

  <div style="background:var(--surface);border:1px solid #bbf7d0;border-left:4px solid #16a34a;border-radius:var(--radius);padding:16px 14px;">

    <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px;">
      <div>
        <span style="font-size:0.68rem;font-weight:700;text-transform:uppercase;letter-spacing:0.08em;color:#166534;font-family:-apple-system,sans-serif;">ğŸ“ˆ Emerging</span>
        <div style="font-weight:700;font-size:1rem;margin-top:3px;">DeepSeek official disclosure</div>
      </div>
      <span style="font-size:0.72rem;color:#166534;font-family:-apple-system,sans-serif;font-weight:600;background:#dcfce7;padding:3px 8px;border-radius:12px;">Tier 2 â†’ Tier 1</span>
    </div>
    <p style="font-size:0.78rem;color:var(--muted);line-height:1.6;font-family:-apple-system,sans-serif;">DeepSeek has never published token consumption data. With DeepSeek V3 and R2 driving massive developer adoption globally, an official disclosure would almost certainly surprise to the upside. Currently est. ~7.5T/day â€” could easily be 15T+.</p>
    <div style="font-size:0.7rem;color:var(--subtle);font-family:-apple-system,sans-serif;margin-top:6px;">Watch: DeepSeek blog Â· HuggingFace traffic Â· developer surveys</div>
  </div>

  <div style="background:var(--surface);border:1px solid #bfdbfe;border-left:4px solid #2563eb;border-radius:var(--radius);padding:16px 14px;">
    <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px;">
      <div>
        <span style="font-size:0.68rem;font-weight:700;text-transform:uppercase;letter-spacing:0.08em;color:#1d4ed8;font-family:-apple-system,sans-serif;">ğŸ”® Wild Card</span>
        <div style="font-weight:700;font-size:1rem;margin-top:3px;">Apple Intelligence scale event</div>
      </div>
      <span style="font-size:0.72rem;color:#1d4ed8;font-family:-apple-system,sans-serif;font-weight:600;background:#dbeafe;padding:3px 8px;border-radius:12px;">H2 2026</span>
    </div>
    <p style="font-size:0.78rem;color:var(--muted);line-height:1.6;font-family:-apple-system,sans-serif;">Apple has 2.2B active devices. If iOS 19 defaults to on-device AI for Siri/Photos/Messages and 5% of users generate 200K tokens/day, that's 22T/day â€” silently. Apple will never disclose this, but it could move the global total by 15%.</p>
    <div style="font-size:0.7rem;color:var(--subtle);font-family:-apple-system,sans-serif;margin-top:6px;">Watch: WWDC 2026 Â· Apple on-device inference chip benchmarks</div>
  </div>

  <div style="background:var(--surface);border:1px solid #e9d5ff;border-left:4px solid #7c3aed;border-radius:var(--radius);padding:16px 14px;">
    <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px;">
      <div>
        <span style="font-size:0.68rem;font-weight:700;text-transform:uppercase;letter-spacing:0.08em;color:#6d28d9;font-family:-apple-system,sans-serif;">ğŸŒ Geopolitical</span>
        <div style="font-weight:700;font-size:1rem;margin-top:3px;">India surpasses France in volume</div>
      </div>
      <span style="font-size:0.72rem;color:#6d28d9;font-family:-apple-system,sans-serif;font-weight:600;background:#f3e8ff;padding:3px 8px;border-radius:12px;">~Q4 2026</span>
    </div>
    <p style="font-size:0.78rem;color:var(--muted);line-height:1.6;font-family:-apple-system,sans-serif;">India (0.6%) is now below France (1.5%). The India AI Mission, government compute infrastructure (10,000 GPU target), and Indic language model initiatives (Sarvam, Krutrim) could reverse this by end of 2026. When it happens, it signals a new AI power map.</p>
    <div style="font-size:0.7rem;color:var(--subtle);font-family:-apple-system,sans-serif;margin-top:6px;">Watch: IndiaAI Mission quarterly reports Â· Sarvam AI usage stats</div>
  </div>

</div>
<style>@media (max-width:640px){ .watchlist-grid { grid-template-columns: 1fr !important; } }</style>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TOKEN ECONOMY FRAMEWORK â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">The Token Economy â€” A Macro Framework</div>
<div class="method-box" style="font-family:-apple-system,sans-serif;">
  <div style="border-left:4px solid var(--text);padding:14px 18px;margin-bottom:20px;background:var(--chip);border-radius:0 6px 6px 0;">
    <p style="font-size:0.92rem;font-weight:700;color:var(--text);margin-bottom:6px;font-style:italic;">"The Token Economy is the global system of AI inference production, consumption, and exchange â€” in which AI-generated tokens function simultaneously as commodity, currency, and geopolitical signal."</p>
    <p style="font-size:0.72rem;color:var(--muted);">â€” GATT Definition, 2026. Distinct from behavioral psychology's token economies and crypto's token systems.</p>
  </div>

  <h3 style="font-size:0.95rem;margin-bottom:10px;">Why Tokens Are the New Oil</h3>
  <p style="font-size:0.82rem;color:var(--muted);line-height:1.7;margin-bottom:12px;">
    In Carlota Perez's framework of <em>Technological Revolutions and Financial Capital</em>, each major technology wave creates a new "key input" â€” coal â†’ steam, steel â†’ railroads, oil â†’ automobiles, chips â†’ computers.
    AI inference tokens are the key input of the current wave: they are the unit of production, the measure of scale, and the battleground of geopolitical competition.
  </p>

  <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:1px;background:var(--border);border:1px solid var(--border);border-radius:6px;overflow:hidden;margin-bottom:16px;">
    <div style="background:var(--surface);padding:14px 12px;">
      <div style="font-size:0.68rem;font-weight:700;text-transform:uppercase;letter-spacing:0.08em;color:var(--muted);margin-bottom:6px;">As Commodity</div>
      <div style="font-size:0.85rem;color:var(--text);line-height:1.5;">Bought and sold per million units at market prices. Chinese tokens trade at $0.10â€“0.30/M. US tokens at $1â€“6/M. A 4â€“60Ã— price gap that mirrors oil quality differentials.</div>
    </div>
    <div style="background:var(--surface);padding:14px 12px;">
      <div style="font-size:0.68rem;font-weight:700;text-transform:uppercase;letter-spacing:0.08em;color:var(--muted);margin-bottom:6px;">As Currency</div>
      <div style="font-size:0.85rem;color:var(--text);line-height:1.5;">API access is priced in tokens. Enterprise AI budgets are denominated in tokens. Countries that produce cheap tokens gain influence â€” just as petrodollar recycling shaped 20th-century geopolitics.</div>
    </div>
    <div style="background:var(--surface);padding:14px 12px;">
      <div style="font-size:0.68rem;font-weight:700;text-transform:uppercase;letter-spacing:0.08em;color:var(--muted);margin-bottom:6px;">As Geopolitical Signal</div>
      <div style="font-size:0.85rem;color:var(--text);line-height:1.5;">Token volume = sovereign AI capacity. China's 55% share signals computational self-sufficiency. US export controls target the chip layer that produces tokens. Token counts are a proxy for national AI power.</div>
    </div>
  </div>

  <h3 style="font-size:0.95rem;margin-bottom:8px;">The GATT Thesis in One Sentence</h3>
  <p style="font-size:0.85rem;color:var(--text);line-height:1.7;background:var(--chip);padding:12px 14px;border-radius:6px;">
    <strong>China leads token volume by 2Ã—; the US leads token value by 4Ã—; and this gap â€” measured by the Dollar-Equivalent Compute (DEC) metric â€” is the single most important number in understanding the global AI power balance.</strong>
  </p>
  <p style="font-size:0.72rem;color:var(--muted);margin-top:8px;">
    Related frameworks: Perez (2002) <em>Technological Revolutions and Financial Capital</em> Â· Zuboff (2019) <em>The Age of Surveillance Capitalism</em> Â· Bresnahan &amp; Trajtenberg (1995) on General Purpose Technologies.
    GATT's contribution: applying commodity-market analysis to AI inference at daily granularity.
  </p>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ABOUT & CITE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">About This Project</div>
<div class="method-box" style="font-family:-apple-system,sans-serif;">
  <div style="display:flex;gap:20px;align-items:flex-start;flex-wrap:wrap;">
    <div style="flex:1;min-width:260px;">
      <h3 style="font-size:0.95rem;margin-bottom:8px;">Built by Frank Gao</h3>
      <p style="font-size:0.82rem;color:var(--muted);line-height:1.6;">
        Global AI communications expert. Ex-Alibaba, Microsoft, Nokia.
        Built GATT to bring transparency to the Token Economy â€” AI inference as commodity, currency, and geopolitical force.
      </p>
      <div style="margin-top:10px;display:flex;gap:12px;font-size:0.78rem;">
        <a href="https://linkedin.com/in/frankgao" target="_blank" style="color:var(--us);text-decoration:none;font-weight:600;">LinkedIn â†’</a>
        <a href="https://twitter.com/goghxiang" target="_blank" style="color:var(--text);text-decoration:none;font-weight:600;">ğ• @goghxiang â†’</a>
        <a href="mailto:goghxiang@gmail.com" style="color:var(--muted);text-decoration:none;">Media inquiries â†’</a>
      </div>
    </div>
    <div style="flex:1;min-width:260px;">
      <h3 style="font-size:0.95rem;margin-bottom:8px;">ğŸ“ Cite This Data</h3>
      <div style="background:var(--chip);padding:12px 14px;border-radius:6px;font-size:0.78rem;line-height:1.6;">
        <strong>Academic / Report:</strong><br>
        <code style="font-size:0.75rem;word-break:break-all;">Gao, F. (2026). GATT: Global AI Token Tracker. Retrieved from https://gf691271.github.io/gatt/</code>
      </div>
      <div style="background:var(--chip);padding:12px 14px;border-radius:6px;font-size:0.78rem;line-height:1.6;margin-top:8px;">
        <strong>Journalism:</strong><br>
        "According to the Global AI Token Tracker (GATT), a project by Frank Gao tracking daily AI inference consumption across 29 vendors..."
      </div>
      <div style="background:var(--chip);padding:12px 14px;border-radius:6px;font-size:0.78rem;line-height:1.6;margin-top:8px;">
        <strong>Open Data API:</strong><br>
        <code style="font-size:0.75rem;">curl https://gf691271.github.io/gatt/data/tci-latest.json</code>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CHANGELOG â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section-label">Correction & Update Log â€” Public Data Revision History</div>
<div class="method-box" style="font-family:-apple-system,sans-serif;font-size:0.82rem;">
  <p style="font-size:0.78rem;color:var(--muted);margin-bottom:16px;">All data corrections are logged publicly. Transparency is core to GATT's credibility. If you spot an error, <a href="https://github.com/gf691271/gatt/issues/new?title=Data+correction&labels=data" style="color:var(--us);">submit a correction â†’</a></p>

  <div class="changelog-entry correction">
    <span class="changelog-tag tag-correction">Correction</span>
    <strong>Global Total</strong>
    <span class="correction-date" style="margin-left:8px;">2026-02-26</span><br>
    <span class="correction-old">~136T/day</span> â†’ <span class="correction-new">~151T/day</span><br>
    <span style="color:var(--muted);font-size:0.78rem;">Cascade update after individual vendor corrections: Claude (+7.5T), Grok debut (+0.5T), Hunyuan debut (+2T), ERNIE (+0.6T) = +10.6T total adjustment. Global total revised from 136T to ~151T.</span>
  </div>

  <div class="changelog-entry correction">
    <span class="changelog-tag tag-correction">Correction</span>
    <strong>Claude (Anthropic)</strong>
    <span class="correction-date" style="margin-left:8px;">2026-02-20</span><br>
    <span class="correction-old">2.5T/day</span> â†’ <span class="correction-new">~10T/day</span><br>
    <span style="color:var(--muted);font-size:0.78rem;">Previous estimate used stale $3B ARR from 2024. Corrected after Bloomberg confirmed $14B ARR (Feb 2026) and Anthropic's own 820M API requests/day stat (Jun 2025). RevenueÃ·blended price yields 8â€“12T range.</span>
  </div>

  <div class="changelog-entry correction">
    <span class="changelog-tag tag-correction">Correction</span>
    <strong>Doubao (ByteDance)</strong>
    <span class="correction-date" style="margin-left:8px;">2026-01-15</span><br>
    <span class="correction-old">~50T/day</span> â†’ <span class="correction-new">63T/day</span><br>
    <span style="color:var(--muted);font-size:0.78rem;">December 2025 figure (50T) replaced with official January 2026 average published by Volcano Engine blog. High-confidence anchor event.</span>
  </div>

  <div class="changelog-entry addition">
    <span class="changelog-tag tag-addition">Promoted</span>
    <strong>Hunyuan/Tencent</strong> â€” Dark Zone â†’ Tier 2
    <span class="correction-date" style="margin-left:8px;">2026-02-25</span><br>
    <span class="correction-old">Unknown (dark zone)</span> â†’ <span class="correction-new">~2T/day est.</span><br>
    <span style="color:var(--muted);font-size:0.78rem;">Tencent Yuanbao hit 50M DAU + 900 internal corporate deployments (Feb 2026). Sufficient to model: 50M DAU Ã— 40K tokens/day avg = ~2T.</span>
  </div>

  <div class="changelog-entry addition">
    <span class="changelog-tag tag-addition">Promoted</span>
    <strong>Grok (xAI)</strong> â€” Dark Zone â†’ Tier 2
    <span class="correction-date" style="margin-left:8px;">2026-02-20</span><br>
    <span class="correction-old">Unknown (dark zone)</span> â†’ <span class="correction-new">~0.5T/day est.</span><br>
    <span style="color:var(--muted);font-size:0.78rem;">xAI disclosed 134M queries/day (Feb 2026). At avg 3,700 tokens/query â†’ ~0.5T/day. Source: Elon Musk post on X.</span>
  </div>

  <div class="changelog-entry update">
    <span class="changelog-tag tag-update">Update</span>
    <strong>ERNIE (Baidu)</strong>
    <span class="correction-date" style="margin-left:8px;">2026-02-10</span><br>
    <span class="correction-old">~1T/day</span> â†’ <span class="correction-new">1.6T/day</span><br>
    <span style="color:var(--muted);font-size:0.78rem;">Baidu Q4 2025 earnings confirmed ERNIE 4.5 adoption growth, revised upward from previous estimate.</span>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FOOTER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<footer class="site-footer">
  <div>GATT Â· Global AI Token Tracker Â· Open Data Â· CC BY 4.0 Â· <a href="https://github.com/gf691271/gatt" style="color:inherit">GitHub</a></div>
  <div style="margin:6px 0;">Cite: Gao, F. (2026). GATT: Global AI Token Tracker. <a href="https://gf691271.github.io/gatt/" style="color:inherit">gf691271.github.io/gatt</a></div>
  <div style="margin:4px 0;"><a href="about.html" style="color:inherit">About &amp; Methodology</a> Â· <a href="CHANGELOG.md" style="color:inherit">Data Changelog</a> Â· <span style="color:var(--subtle)">API docs coming soon</span></div>
  <div style="margin-top:6px;">All figures are estimates. Not financial advice. Last updated 2026-02-27.</div>
</footer>

</div><!-- /page -->

<script>
// â”€â”€ TREND DATA (daily interpolation from anchor points) â”€â”€
// Algorithm: compound daily growth between confirmed anchor events
// CN anchors: Doubao 120B/d (2024-05-01), 4T/d (2024-12-01), 12.7T/d (2025-03-01), 16.4T/d (2025-05-01), 30T/d (2025-09-01), 50T/d (2025-12-01)
// US anchors: ~8T/d (2024-Q2), ~15T/d (2024-Q4), ~20T/d (2025-Q2), OpenAI 8.6T+Azure+OpenRouter ~28T/d (2025-10), ~32T/d (2025-12), ~34T/d (2026-02)
// RoW: EU(Mistral) + CA(Cohere) + independents, growing slower

function interpolateDaily(anchors, targetDates) {
  return targetDates.map(d => {
    const t = new Date(d).getTime();
    for (let i = 0; i < anchors.length - 1; i++) {
      const t0 = new Date(anchors[i].date).getTime();
      const t1 = new Date(anchors[i+1].date).getTime();
      if (t >= t0 && t <= t1) {
        const ratio = (t - t0) / (t1 - t0);
        // compound interpolation
        const v0 = anchors[i].v, v1 = anchors[i+1].v;
        return +(v0 * Math.pow(v1/v0, ratio)).toFixed(2);
      }
    }
    if (t < new Date(anchors[0].date).getTime()) return anchors[0].v;
    return anchors[anchors.length-1].v;
  });
}

// Generate daily dates from 2024-05-01 to today
function genDates(start, end) {
  const dates = [];
  let d = new Date(start);
  const e = new Date(end);
  while (d <= e) {
    dates.push(d.toISOString().slice(0,10));
    d.setDate(d.getDate() + 1);
  }
  return dates;
}

const startDate = '2024-05-01';
const todayStr = '2026-02-26';
const allDates = genDates(startDate, todayStr);

// Thin to ~monthly ticks for display, keep all data
const displayDates = allDates.filter((_, i) => i % 30 === 0 || i === allDates.length - 1);

const cnAnchors = [
  {date:'2024-05-01', v:0.12},
  {date:'2024-12-01', v:4},
  {date:'2025-03-01', v:12.7},
  {date:'2025-05-01', v:16.4},
  {date:'2025-09-01', v:30},
  {date:'2025-12-01', v:50},
  {date:'2026-01-15', v:63},  // Volcano Engine Jan 2026 avg
  {date:'2026-02-26', v:66}   // GATT interpolated
];
const usAnchors = [
  {date:'2024-05-01', v:6},
  {date:'2024-12-01', v:12},
  {date:'2025-03-01', v:17},
  {date:'2025-06-01', v:22},
  {date:'2025-07-01', v:25},  // Google 35T + OpenAI growing
  {date:'2025-10-01', v:30},
  {date:'2025-12-01', v:34},
  {date:'2026-02-26', v:36}   // Google 35T + OpenAI 19T + others
];
const rowAnchors = [
  {date:'2024-05-01', v:1},
  {date:'2024-12-01', v:2.5},
  {date:'2025-06-01', v:5},
  {date:'2025-12-01', v:9},
  {date:'2026-02-26', v:11}
];

// DEC multipliers (tokens Ã— avg_price/T_tokens â†’ $M/day)
// CN: cheap models ~$0.14/T â†’ DEC = tokens*0.14
// US: premium mix ~$1.06/T â†’ DEC = tokens*1.06
// RoW: ~$0.5/T
const cnDECAnchors = cnAnchors.map(a => ({date:a.date, v:+(a.v*0.14).toFixed(2)}));
const usDECAnchors = usAnchors.map(a => ({date:a.date, v:+(a.v*1.06).toFixed(2)}));
const rowDECAnchors = rowAnchors.map(a => ({date:a.date, v:+(a.v*0.5).toFixed(2)}));

const cnVals = interpolateDaily(cnAnchors, allDates);
const usVals = interpolateDaily(usAnchors, allDates);
const rowVals = interpolateDaily(rowAnchors, allDates);
const cnDECVals = interpolateDaily(cnDECAnchors, allDates);
const usDECVals = interpolateDaily(usDECAnchors, allDates);
const rowDECVals = interpolateDaily(rowDECAnchors, allDates);

// Thin data for chart performance
const stride = 7; // weekly points
const chartDates = allDates.filter((_,i) => i % stride === 0 || i === allDates.length-1);
const chartCN = cnVals.filter((_,i) => i % stride === 0 || i === cnVals.length-1);
const chartUS = usVals.filter((_,i) => i % stride === 0 || i === usVals.length-1);
const chartROW = rowVals.filter((_,i) => i % stride === 0 || i === rowVals.length-1);
const chartCNd = cnDECVals.filter((_,i) => i % stride === 0 || i === cnDECVals.length-1);
const chartUSd = usDECVals.filter((_,i) => i % stride === 0 || i === usDECVals.length-1);
const chartROWd = rowDECVals.filter((_,i) => i % stride === 0 || i === rowDECVals.length-1);

// Format labels: show month/year at first of month
const chartLabels = chartDates.map((d,i) => {
  if (i === chartDates.length-1) return 'Today';
  const dt = new Date(d);
  if (dt.getDate() <= 7) return dt.toLocaleDateString('en-US',{month:'short',year:'2-digit'});
  return '';
});

let currentView = 'tokens'; // 'tokens' | 'dec'
let showCN = true, showUS = true, showROW = true;
let trendChart;

function makeGradient(ctx, color) {
  const gradient = ctx.createLinearGradient(0, 0, 0, 300);
  gradient.addColorStop(0, color.replace('1)', '0.18)'));
  gradient.addColorStop(1, color.replace('1)', '0.0)'));
  return gradient;
}

function buildDatasets() {
  const isTok = currentView === 'tokens';
  const ctx = document.getElementById('trendChart').getContext('2d');
  return [
    {
      label: 'China ğŸ‡¨ğŸ‡³',
      data: isTok ? chartCN : chartCNd,
      borderColor: '#c0392b',
      backgroundColor: makeGradient(ctx, 'rgba(192,57,43,1)'),
      borderWidth: 1.5,
      pointRadius: (c) => c.dataIndex === chartDates.length-1 ? 4 : 0,
      pointBackgroundColor: '#c0392b',
      pointBorderColor: '#fff',
      pointBorderWidth: 1.5,
      tension: 0.4,
      fill: true,
      hidden: !showCN
    },
    {
      label: 'US ğŸ‡ºğŸ‡¸',
      data: isTok ? chartUS : chartUSd,
      borderColor: '#2563eb',
      backgroundColor: makeGradient(ctx, 'rgba(37,99,235,1)'),
      borderWidth: 1.5,
      pointRadius: (c) => c.dataIndex === chartDates.length-1 ? 4 : 0,
      pointBackgroundColor: '#2563eb',
      pointBorderColor: '#fff',
      pointBorderWidth: 1.5,
      tension: 0.4,
      fill: true,
      hidden: !showUS
    },
    {
      label: 'Rest of World ğŸŒ',
      data: isTok ? chartROW : chartROWd,
      borderColor: '#6b7280',
      backgroundColor: makeGradient(ctx, 'rgba(107,114,128,1)'),
      borderWidth: 1.5,
      pointRadius: (c) => c.dataIndex === chartDates.length-1 ? 4 : 0,
      pointBackgroundColor: '#6b7280',
      pointBorderColor: '#fff',
      pointBorderWidth: 1.5,
      tension: 0.4,
      fill: true,
      hidden: !showROW
    }
  ];
}

function initChart() {
  const ctx = document.getElementById('trendChart').getContext('2d');
  trendChart = new Chart(ctx, {
    type: 'line',
    data: { labels: chartLabels, datasets: buildDatasets() },
    options: {
      responsive: true,
      interaction: { mode: 'index', intersect: false },
      plugins: {
        legend: {
          display: true,
          position: 'top',
          align: 'start',
          labels: {
            font: { family: '-apple-system, sans-serif', size: 11, weight: '500' },
            boxWidth: 8, boxHeight: 8,
            padding: 18,
            color: '#3a3935',
            usePointStyle: true,
            pointStyle: 'circle'
          }
        },
        tooltip: {
          backgroundColor: 'rgba(255,255,255,0.98)',
          borderColor: '#e6e3dc',
          borderWidth: 1,
          titleColor: '#171715',
          bodyColor: '#6f6d67',
          titleFont: { family: '-apple-system, sans-serif', size: 11, weight: '600' },
          bodyFont: { family: '-apple-system, sans-serif', size: 11 },
          padding: 12,
          boxPadding: 4,
          callbacks: {
            title: items => {
              const d = chartDates[items[0].dataIndex];
              return new Date(d).toLocaleDateString('en-US',{month:'short', day:'numeric', year:'numeric'});
            },
            label: c => {
              const v = c.parsed.y;
              const label = c.dataset.label.replace(/ğŸ‡¨ğŸ‡³|ğŸ‡ºğŸ‡¸|ğŸŒ/g,'').trim();
              return currentView === 'tokens'
                ? `  ${label}  ${v.toFixed(1)}T / day`
                : `  ${label}  ${v.toFixed(1)}T adj / day`;
            }
          }
        },
        annotation: {
          annotations: {
            doubaoSurge: {
              type: 'line', scaleID: 'x',
              value: chartDates.findIndex(d => d >= '2024-12-01'),
              borderColor: 'rgba(192,57,43,0.25)', borderWidth: 1, borderDash: [4,3],
              label: { display: true, content: 'Doubao 4T', position: 'start',
                font: { size: 9, family: '-apple-system, sans-serif' },
                color: '#c0392b', backgroundColor: 'transparent', padding: 2 }
            },
            deepseekR1: {
              type: 'line', scaleID: 'x',
              value: chartDates.findIndex(d => d >= '2025-01-20'),
              borderColor: 'rgba(37,99,235,0.2)', borderWidth: 1, borderDash: [4,3],
              label: { display: true, content: 'DeepSeek R1', position: 'start',
                font: { size: 9, family: '-apple-system, sans-serif' },
                color: '#2563eb', backgroundColor: 'transparent', padding: 2 }
            },
            doubao50T: {
              type: 'line', scaleID: 'x',
              value: chartDates.findIndex(d => d >= '2025-12-01'),
              borderColor: 'rgba(192,57,43,0.2)', borderWidth: 1, borderDash: [4,3],
              label: { display: true, content: 'Doubao 50-63T', position: 'start',
                font: { size: 9, family: '-apple-system, sans-serif' },
                color: '#c0392b', backgroundColor: 'transparent', padding: 2 }
            }
          }
        }
      },
      scales: {
        x: {
          grid: { color: 'rgba(0,0,0,0.04)', drawBorder: false },
          border: { display: false },
          ticks: {
            font: { family: '-apple-system, sans-serif', size: 10 },
            color: '#9a9791',
            maxRotation: 0,
            maxTicksLimit: 10
          }
        },
        y: {
          grid: { color: 'rgba(0,0,0,0.04)', drawBorder: false },
          border: { display: false },
          ticks: {
            font: { family: '-apple-system, sans-serif', size: 10 },
            color: '#9a9791',
            padding: 8,
            callback: v => currentView === 'tokens' ? v+'T' : '$'+v+'M'
          }
        }
      }
    }
  });
  animateTodayDot();
}

// Blinking today dot
function animateTodayDot() {
  let big = true;
  setInterval(() => {
    if (!trendChart) return;
    trendChart.data.datasets.forEach(ds => {
      ds.pointRadius = (ctx) => ctx.dataIndex === chartDates.length-1 ? (big ? 7 : 4) : 0;
    });
    trendChart.update('none');
    big = !big;
  }, 900);
}

function toggleSeries(region) {
  if (region === 'cn') showCN = !showCN;
  if (region === 'us') showUS = !showUS;
  if (region === 'row') showROW = !showROW;
  document.getElementById('btn-cn').classList.toggle('active', showCN);
  document.getElementById('btn-us').classList.toggle('active', showUS);
  document.getElementById('btn-row').classList.toggle('active', showROW);
  trendChart.data.datasets[0].hidden = !showCN;
  trendChart.data.datasets[1].hidden = !showUS;
  trendChart.data.datasets[2].hidden = !showROW;
  trendChart.update();
}

function setView(v) {
  currentView = v;
  document.getElementById('view-tokens').classList.toggle('active', v === 'tokens');
  document.getElementById('view-dec').classList.toggle('active', v === 'dec');
  document.querySelector('.chart-axis-label').textContent =
    v === 'tokens' ? 'Trillion tokens per day (T)' : 'Dollar-Equivalent Compute â€” $M/day';
  trendChart.data.datasets = buildDatasets();
  trendChart.options.scales.y.ticks.callback = val =>
    v === 'tokens' ? val+'T' : '$'+val+'M';
  trendChart.update();
}

// â”€â”€ METHOD DATA â”€â”€
const methodData = {
  'doubao': {
    vendor: 'Doubao (ByteDance)',
    sourceValue: '63T/day (Jan 2026 avg)',
    sourceDate: '2026-01-15',
    source: 'Volcano Engine official blog â€” Jan 2026',
    sourceUrl: 'https://www.volcengine.com/news',
    sourceUrl2: 'https://techcrunch.com/2026/01/bytedance-doubao-63-trillion/',
    sourceUrl2Label: 'TechCrunch coverage',
    logic: 'Direct official disclosure from ByteDance/Volcano Engine. Jan 2026 average = 63T/day, up from 50T/day (Dec 2025). Highest-volume AI service globally by raw token count.',
    growthRate: '+8%/mo',
    extrapolated: '~63T/day (Jan 2026 anchor Â· Feb 2026 est. ~66T)',
    confidence: 'high',
    confidenceReason: 'Direct company disclosure, cross-validated with Volcano Engine compute spend'
  },
  'gemini': {
    vendor: 'Google Gemini',
    sourceValue: '1.3 quadrillion tokens/month (Oct 2025, All Surfaces)',
    sourceDate: '2025-Q4 earnings',
    source: 'Alphabet Q3 2025 Earnings Call (Sundar Pichai)',
    sourceUrl: 'https://abc.xyz/investor/earnings/2025/q3/',
    sourceUrl2: 'https://cloud.google.com/blog/products/ai-machine-learning/google-gemini-token-milestones',
    sourceUrl2Label: 'Google Cloud token milestones',
    logic: 'Google disclosed tokens/min in earnings calls. Q3: 10.08B/min â†’ Q4: 14.54B/min (All Surfaces incl. Search AI, Workspace, API). Extrapolated at +13%/mo to Feb 2026 â†’ ~50T/day.',
    growthRate: '+8%/mo (Julâ†’Oct 2025, slowing)',
    extrapolated: '~50T/day (Feb 2026 est., All Surfaces)',
    confidence: 'high',
    confidenceReason: 'Two direct financial disclosure data points with clear growth trend'
  },
  'openai': {
    vendor: 'OpenAI (ChatGPT + API)',
    sourceValue: '~500M API calls/day, $5B ARR',
    sourceDate: '2025-H2',
    source: 'Epoch AI compute analysis + OpenAI revenue reports',
    sourceUrl: 'https://epochai.org/blog/training-compute-of-frontier-ai-models',
    sourceUrl2: 'https://www.theinformation.com/articles/openai-annualized-revenue',
    sourceUrl2Label: 'The Information: OpenAI revenue',
    logic: 'Estimated from $5B ARR (mid-2025) at blended ~$2/M tokens = ~6.8T/day API, plus ChatGPT consumer usage ~12T/day. Total ~19T/day.',
    growthRate: '+15%/mo',
    extrapolated: '~19T/day (Feb 2026 est.)',
    confidence: 'medium',
    confidenceReason: 'ARR-derived, sensitive to pricing assumptions. Multiple analyst reports converge on this range.'
  },
  'claude': {
    vendor: 'Claude (Anthropic)',
    sourceValue: '$14B ARR (Feb 2026) + 820M API req/day (Jun 2025)',
    sourceDate: '2026-02',
    source: 'Bloomberg: Anthropic $14B ARR (Feb 2026)',
    sourceUrl: 'https://www.bloomberg.com/news/articles/2026-02/anthropic-14-billion-arr',
    sourceUrl2: 'https://www.anthropic.com/news/api-usage-milestones',
    sourceUrl2Label: 'Anthropic 820M req/day (Jun 2025)',
    logic: 'Anthropic reached $14B ARR by Feb 2026 (up from $1B in Dec 2024). At 70% API revenue share and ~$3/M blended token price: $9.8B/yr Ã· $3/M Ã· 365 = ~9T/day. Cross-validated: 820M API requests/day Ã— avg 12K tokens = ~10T/day.',
    growthRate: '+14Ã—/year (2024â†’2025)',
    extrapolated: '~7â€“10T/day (Feb 2026 est.)',
    confidence: 'medium-low',
    confidenceReason: 'Inferred from ARR. Key uncertainty: actual blended pricing ($1.5â€“$6/M range gives 3â€“18T). Claude Code long-context use likely undercounted.'
  },
  'global': {
    vendor: 'Global Total',
    sourceValue: '~151T/day (revised from 136T after Feb-2026 data corrections)',
    sourceDate: '2026-02-26',
    source: 'GATT synthesis of all vendor estimates',
    logic: 'Revised from 136T to 151T after data corrections: Claude 2.5Tâ†’10T (+7.5T), Grok darkâ†’0.5T (+0.5T), Hunyuan darkâ†’2T (+2T), ERNIE 1Tâ†’1.6T (+0.6T). Total corrections: +10.6T. New sum: Tier 1 ~125T + Tier 2 ~20T + Tier 3 ~6T = ~151T.',
    growthRate: '+23%/mo (Janâ†’Feb 2026)',
    extrapolated: '~1,100T/day by Dec 2026 (at current growth, revised upward)',
    confidence: 'low-medium',
    confidenceReason: 'Aggregate of individually uncertain estimates. Doubao alone is ~42% of total â€” its accuracy dominates. Revision adds confidence from better data on Claude, Grok, Hunyuan.'
  }
};

// â”€â”€ CORRECTION HISTORY â”€â”€
// Documents all data corrections made to vendor estimates, with date + rationale
const corrections = {
  'Claude': [
    {
      date: '2026-02-20',
      old: '2.5T/day',
      new: '~10T/day',
      reason: 'Stale $3B ARR estimate replaced with confirmed $14B ARR (Feb 2026) + Anthropic 820M API req/day (Jun 2025) proxy. RevenueÃ·blended price gives 8â€“12T range; midpoint 10T adopted.',
      source: 'Bloomberg $14B ARR (Feb-2026) + Anthropic API blog (Jun-2025)'
    }
  ],
  'Doubao': [
    {
      date: '2026-01-15',
      old: '~50T/day',
      new: '63T/day',
      reason: 'ByteDance Volcano Engine published January 2026 average (63T). Previous 50T was December 2025 figure.',
      source: 'Volcano Engine official blog (Jan 2026)'
    }
  ],
  'Hunyuan': [
    {
      date: '2026-02-25',
      old: 'Dark Zone (unknown)',
      new: '~2T/day est.',
      reason: 'Tencent Yuanbao reached 50M DAU + 900 internal corporate deployments (Feb 2026). Promoted from Tier 3 to Tier 2 based on DAU Ã— avg tokens model.',
      source: 'Tencent investor day (Feb 2026) Â· Yuanbao DAU announcement'
    }
  ],
  'Grok': [
    {
      date: '2026-02-20',
      old: 'Dark Zone (unknown)',
      new: '~0.5T/day est.',
      reason: 'xAI reported 134M queries/day (Feb 2026). At avg ~3.7K tokens/query â†’ ~0.5T/day. Promoted from Tier 3 to Tier 2.',
      source: 'xAI / Elon Musk X post citing 134M queries/day (Feb 2026)'
    }
  ],
  'Google Gemini': [
    {
      date: '2026-02-26',
      old: '35T/day (API-only)',
      new: '~50T/day (All Surfaces)',
      reason: 'Switched to All Surfaces scope per Q3 2025 earnings.',
      source: 'Alphabet Q3 2025 Earnings Call'
    }
  ],
  'DeepSeek': [
    {
      date: '2026-02-26',
      old: '~5T/day',
      new: '~7.5T/day',
      reason: 'V3 + R1 adoption surge.',
      source: 'HuggingFace + market modeling'
    }
  ],
  'Groq': [
    {
      date: '2026-02-26',
      old: '~0.15T/day',
      new: '~0.25T/day',
      reason: 'LPU capacity back-calc + valuation estimate.',
      source: 'Groq $750M funding round (Sep 2025)'
    }
  ],
  'ERNIE': [
    {
      date: '2026-02-10',
      old: '~1T/day',
      new: '1.6T/day',
      reason: 'Baidu Q4 2025 earnings confirmed upgraded ERNIE 4.5 adoption growth. Revised upward from previous estimate.',
      source: 'Baidu Q4 2025 earnings call'
    }
  ]
};

function renderCorrectionBadge(vendorName) {
  const history = corrections[vendorName];
  if (!history || history.length === 0) return '';
  const count = history.length;
  const id = 'corr-' + vendorName.replace(/[^a-z0-9]/gi, '');
  return `<button class="correction-badge" onclick="toggleCorrection('${id}')" title="Data corrected ${count}Ã— â€” click to see history">âœï¸ ${count > 1 ? count + ' corrections' : 'corrected ' + history[0].date}</button>`;
}

function renderCorrectionPanel(vendorName) {
  const history = corrections[vendorName];
  if (!history || history.length === 0) return '';
  const id = 'corr-' + vendorName.replace(/[^a-z0-9]/gi, '');
  let inner = history.map(c => `
    <div style="margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid #fde68a;">
      <span class="correction-date">ğŸ“… ${c.date}</span><br>
      <span class="correction-old">${c.old}</span> â†’ <span class="correction-new">${c.new}</span><br>
      <span style="color:var(--muted)">${c.reason}</span><br>
      <span style="font-size:0.68rem;color:var(--subtle)">Source: ${c.source}</span>
    </div>`).join('');
  return `<div class="correction-panel" id="${id}" style="display:none">${inner}</div>`;
}

function toggleCorrection(id) {
  const panel = document.getElementById(id);
  if (!panel) return;
  panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
}

const confBadgeClass = { 'high': 'conf-high', 'medium': 'conf-medium', 'medium-low': 'conf-medium', 'low-medium': 'conf-low-medium' };
const confBadgeLabel = { 'high': 'âœ“ High confidence', 'medium': '~ Medium confidence', 'medium-low': 'â‰ˆ Medium-low', 'low-medium': 'â‰ˆ Low-medium' };

function renderMethodPanel(id) {
  const d = methodData[id];
  if (!d) return '';
  const cls = confBadgeClass[d.confidence] || 'conf-low-medium';
  const lbl = confBadgeLabel[d.confidence] || d.confidence;
  const srcLink = d.sourceUrl
    ? `<a href="${d.sourceUrl}" target="_blank" rel="noopener" style="color:var(--us);text-decoration:none;font-weight:600;font-size:0.72rem;"> â†— Primary source</a>`
    : '';
  const src2Link = d.sourceUrl2
    ? `<a href="${d.sourceUrl2}" target="_blank" rel="noopener" style="color:var(--us);text-decoration:none;font-weight:600;font-size:0.72rem;"> â†— ${d.sourceUrl2Label || 'Secondary source'}</a>`
    : '';
  return `<div class="method-panel-inner">
    <strong>How we estimated ${d.vendor}</strong>
    <span class="method-source">ğŸ“Œ Source: ${d.source} <em>(${d.sourceDate})</em> â€” ${d.sourceValue}${srcLink}${src2Link ? ' Â· ' + src2Link : ''}</span>
    <span class="method-logic">${d.logic}</span>
    <span class="method-extrapolation">ğŸ“ˆ Growth rate: ${d.growthRate} â†’ <strong>${d.extrapolated}</strong></span>
    <span><span class="method-conf-badge ${cls}">${lbl}</span> <span class="method-source">${d.confidenceReason}</span></span>
    <a href="https://github.com/gf691271/gatt/issues/new?title=Data+correction+${encodeURIComponent(d.vendor)}&labels=data" target="_blank" class="method-correct-link">âœï¸ Correct this estimate</a>
  </div>`;
}

function toggleMethod(vendorId) {
  const panel = document.getElementById('method-' + vendorId);
  if (!panel) return;
  const isHidden = panel.style.display === 'none';
  panel.style.display = isHidden ? 'block' : 'none';
  // Render content on first open
  if (isHidden) {
    const inner = panel.querySelector('.method-panel-inner') || document.getElementById('method-' + vendorId + '-inner');
    if (inner && !inner.dataset.rendered) {
      inner.innerHTML = renderMethodPanel(vendorId);
      inner.dataset.rendered = '1';
    }
  }
}

function toggleProjMethod(id) {
  const panel = document.getElementById(id);
  if (!panel) return;
  panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
}

// Populate global method panel inner on page load
(function() {
  const inner = document.getElementById('method-global-inner');
  if (inner) inner.innerHTML = renderMethodPanel('global');
})();

// â”€â”€ RANKING TABLE â”€â”€
// Tier 1: direct or strongly-sourced data â€” sorted by tokNum desc
// mom: month-on-month growth estimate (Janâ†’Feb 2026), null = unknown
const vendors = [
  {rank:1,  flag:'ğŸ‡¨ğŸ‡³', name:'Doubao',        co:'ByteDance',    tokens:'63T',   tokNum:63,   conf:2, src:'Volcano Engine Jan 2026 avg', country:'CN', mom:5},
  {rank:2,  flag:'ğŸ‡ºğŸ‡¸', name:'Google Gemini', co:'Google',       tokens:'~50T',  tokNum:50,   conf:3, src:'Alphabet earnings All Surfaces Oct 2025',   country:'US', mom:8},
  {rank:3,  flag:'ğŸ‡ºğŸ‡¸', name:'ChatGPT / API', co:'OpenAI',       tokens:'19T',   tokNum:19,   conf:2, src:'Epoch AI compute proxy',   country:'US', mom:15},
  {rank:4,  flag:'ğŸ‡¨ğŸ‡³', name:'Qwen',          co:'Alibaba Cloud',tokens:'5T',    tokNum:5,    conf:2, src:'Earnings',                 country:'CN', mom:12},
  {rank:5,  flag:'ğŸ‡¨ğŸ‡³', name:'ERNIE',         co:'Baidu',        tokens:'1.6T',  tokNum:1.6,  conf:3, src:'Earnings',                 country:'CN', mom:8},
  {rank:6,  flag:'ğŸ‡¨ğŸ‡³', name:'Spark',         co:'iFlytek',      tokens:'1.4T',  tokNum:1.4,  conf:2, src:'Earnings',                 country:'CN', mom:null},
  {rank:7,  flag:'ğŸ‡ºğŸ‡¸', name:'OpenRouter',    co:'OpenRouter',   tokens:'1.0T',  tokNum:1.0,  conf:3, src:'Official stats',           country:'US', mom:18},
  {rank:8,  flag:'ğŸ‡¨ğŸ‡³', name:'MiniMax',       co:'MiniMax',      tokens:'0.35T', tokNum:0.35, conf:2, src:'OpenRouter + HuggingFace', country:'CN', mom:null},
  {rank:9,  flag:'ğŸ‡¨ğŸ‡³', name:'Kimi',          co:'Moonshot AI',  tokens:'0.17T', tokNum:0.17, conf:2, src:'OpenRouter',               country:'CN', mom:null},
  {rank:10, flag:'ğŸ‡¨ğŸ‡³', name:'GLM',           co:'Zhipu AI',     tokens:'0.11T', tokNum:0.11, conf:2, src:'OpenRouter',               country:'CN', mom:null},
];

// Tier 2: calculated estimates (midpoint of range, revenue back-calc) â€” sorted desc
const tier2 = [
  {flag:'ğŸ‡¨ğŸ‡³', name:'DeepSeek',      co:'DeepSeek AI',    tokNum:7.5,  tokens:'~7.5T est.',  conf:1, src:'HuggingFace + market share', country:'CN', mom:22},
  {flag:'ğŸ‡ºğŸ‡¸', name:'Azure OpenAI',  co:'Microsoft',      tokNum:7,    tokens:'~7T est.',    conf:1, src:'Revenue Ã· price',            country:'US', mom:12},
  {flag:'ğŸ‡ºğŸ‡¸', name:'Claude',        co:'Anthropic',      tokNum:10,   tokens:'~10T est.',   conf:1, src:'$14B ARR Feb-2026 Ã· price + 820M req/day proxy', country:'US', mom:14},
  {flag:'ğŸ‡«ğŸ‡·', name:'Mistral',       co:'Mistral AI',     tokNum:0.6,  tokens:'~0.6T est.',  conf:1, src:'$400M ARR Ã· price',          country:'EU', mom:null},
  {flag:'ğŸ‡ºğŸ‡¸', name:'Llama API',     co:'Meta',           tokNum:0.2,  tokens:'~0.2T est.',  conf:1, src:'Growth rate stmt',           country:'US', mom:null},
  {flag:'ğŸ‡ºğŸ‡¸', name:'Bedrock',       co:'Amazon AWS',     tokNum:0.15, tokens:'~0.15T est.', conf:1, src:'Revenue known, price est.',  country:'US', mom:null},
  {flag:'ğŸ‡ºğŸ‡¸', name:'Groq',          co:'Groq',           tokNum:0.25, tokens:'~0.25T est.', conf:1, src:'2.5M devs Ã— active usage est.', country:'US', mom:20},
  {flag:'ğŸ‡ºğŸ‡¸', name:'Perplexity',    co:'Perplexity AI',  tokNum:0.07, tokens:'~0.07T est.', conf:1, src:'Query volume Ã· avg length',  country:'US', mom:null},
  {flag:'ğŸ‡¨ğŸ‡³', name:'Hunyuan',       co:'Tencent',        tokNum:2,    tokens:'~2T est.',    conf:1, src:'Yuanbao 50M DAU + 900 internal apps (Feb-2026)', country:'CN', mom:null},
  {flag:'ğŸ‡ºğŸ‡¸', name:'Grok',          co:'xAI',            tokNum:0.5,  tokens:'~0.5T est.',  conf:1, src:'134M queries/day (Feb-2026) Ã— avg tokens', country:'US', mom:null},
];

// Tier 3: data dark zone
const tier3 = [
  {name:'Ollama',               flag:'ğŸŒ',  co:'Ollama',          reason:'Local inference â€” no telemetry'},
  {name:'Ollama',               flag:'ğŸŒ',  co:'Ollama',          reason:'Local inference â€” no telemetry'},
  {name:'LM Studio',            flag:'ğŸŒ',  co:'LM Studio',       reason:'Local inference â€” no telemetry'},
  {name:'NIM',                  flag:'ğŸ‡ºğŸ‡¸', co:'NVIDIA',          reason:'Enterprise private deployment'},
  {name:'Self-hosted (HF)',     flag:'ğŸŒ',  co:'HuggingFace',     reason:'Download-and-run, no usage data'},
  {name:'Yi',                   flag:'ğŸ‡¨ğŸ‡³', co:'01.AI',           reason:'No public disclosure'},
  {name:'Step',                 flag:'ğŸ‡¨ğŸ‡³', co:'StepFun',         reason:'No public disclosure'},
  {name:'SenseCore',            flag:'ğŸ‡¨ğŸ‡³', co:'SenseTime',       reason:'B2B private deployment'},
  {name:'Cohere',               flag:'ğŸ‡¨ğŸ‡¦', co:'Cohere',          reason:'Enterprise contracts only'},
  {name:'Together AI',          flag:'ğŸ‡ºğŸ‡¸', co:'Together AI',     reason:'No public data'},
];

const maxTok = 63;
function confLabel(c) {
  if (c >= 3) return '<span class="conf-3">âœ“ Verified</span>';
  if (c === 2) return '<span class="conf-2">~ Media</span>';
  if (c === 1) return '<span style="color:var(--muted)">â‰ˆ Estimated</span>';
  return '<span style="color:var(--subtle)">? Unknown</span>';
}

// â”€â”€ DATA FRESHNESS â”€â”€
// Given a source date string (YYYY-MM-DD), return a freshness indicator
const TODAY_DATE = new Date('2026-02-26');
function freshnessDot(dateStr) {
  if (!dateStr) return '';
  const src = new Date(dateStr);
  const daysAgo = Math.floor((TODAY_DATE - src) / (1000*60*60*24));
  if (daysAgo <= 30) return `<span title="Fresh data (${daysAgo}d old)" style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#22c55e;margin-left:4px;vertical-align:middle;"></span>`;
  if (daysAgo <= 90) return `<span title="Data is ${daysAgo}d old â€” may be stale" style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#f59e0b;margin-left:4px;vertical-align:middle;"></span>`;
  return `<span title="Data is ${daysAgo}d old â€” likely outdated" style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#ef4444;margin-left:4px;vertical-align:middle;"></span>`;
}

// Source dates for vendors (YYYY-MM-DD)
const vendorSourceDates = {
  'Doubao': '2026-01-15',
  'Google Gemini': '2025-10-29',
  'ChatGPT / API': '2026-02-01',
  'Claude': '2026-02-20',
  'DeepSeek': '2026-02-01',
  'Azure OpenAI': '2026-01-29',
  'Qwen': '2026-01-15',
  'Hunyuan': '2026-02-25',
  'ERNIE': '2026-02-10',
  'Spark': '2025-11-01',
  'OpenRouter': '2026-02-20',
  'Grok': '2026-02-20',
  'MiniMax': '2026-02-10',
  'Kimi': '2026-02-10',
  'GLM': '2026-02-01',
  'Mistral': '2025-12-01',
  'Llama API': '2025-11-15',
  'Bedrock': '2025-12-01',
  'Groq': '2026-01-15',
  'Perplexity': '2026-01-01',
};

// Map vendor names to method IDs
const vendorMethodIds = {
  'Doubao': 'doubao',
  'Google Gemini': 'gemini',
  'ChatGPT / API': 'openai',
  'Claude': 'claude'
};

const vendorPageLinks = {
  'Doubao': 'vendor/doubao.html',
  'Google Gemini': 'vendor/google.html',
  'ChatGPT / API': 'vendor/openai.html',
  'Claude': 'vendor/claude.html',
  'DeepSeek': 'vendor/deepseek.html'
};

function buildRankTable() {
  const table = document.getElementById('rankTable');
  const allRanked = [...vendors, ...tier2].sort((a,b) => b.tokNum - a.tokNum);
  let globalRank = 0;

  // Header
  let html = `<div class="rank-header"><div>#</div><div>Vendor Â· Company</div><div>T Tokens/day</div><div>Source <span title="Confidence: Verified=official | Media=press/analyst | est.=GATT model" style="cursor:help;color:var(--subtle);">â“˜</span></div></div>`;

  allRanked.forEach(v => {
    globalRank++;
    const bar = Math.min((v.tokNum / maxTok * 100), 100).toFixed(1);
    const col = v.country === 'CN' ? 'var(--cn)' : v.country === 'EU' ? '#4f7942' : 'var(--us)';
    const isTier2 = v.conf === 1;
    const tokenLabel = isTier2 ? `<span style="color:var(--muted)">${v.tokens}</span>` : `<strong>${v.tokens}</strong>`;
    const confBadge = isTier2
      ? `<span style="font-size:.65rem;color:var(--muted);font-weight:400">â‰ˆ est.</span>`
      : confLabel(v.conf);
    const methodId = vendorMethodIds[v.name];
    const vendorLink = vendorPageLinks[v.name];
    const infoBtn = methodId
      ? `<button class="show-method" onclick="toggleMethod('${methodId}')" title="How we estimated this">â“˜</button>`
      : '';
    const methodPanel = methodId
      ? `<div class="method-panel" id="method-${methodId}" style="display:none"><div class="method-panel-inner">${renderMethodPanel(methodId)}</div></div>`
      : '';
    const nameHtml = vendorLink
      ? `<a href="${vendorLink}" class="rank-name" style="color:inherit;text-decoration:none;border-bottom:1px dashed var(--subtle)">${v.name}</a>`
      : `<span class="rank-name">${v.name}</span>`;
    const correctionBadge = renderCorrectionBadge(v.name);
    const correctionPanel = renderCorrectionPanel(v.name);
    const freshDot = freshnessDot(vendorSourceDates[v.name]);

    html += `<div class="rank-row-wrapper">
    <div class="rank-row${isTier2 ? ' dark-row' : ''}">
      <div class="rank-num">${globalRank}</div>
      <div>
        <span class="rank-flag">${v.flag}</span>
        ${nameHtml}
        <span style="font-size:.7rem;color:var(--muted);margin-left:5px;font-weight:400">${v.co}</span>
        ${infoBtn}${correctionBadge}
        <div class="rank-bar-wrap" style="margin-top:4px">
          <div class="rank-bar-fill" style="width:${bar}%;background:${col};${isTier2?'opacity:0.45':''}"></div>
        </div>
      </div>
      <div class="rank-tokens">${tokenLabel}${v.mom != null ? `<br><span style="font-size:.62rem;color:#166534;font-weight:600;">â†‘+${v.mom}%/mo</span>` : ''}</div>
      <div class="rank-confidence" style="font-size:.68rem">${confBadge}${freshDot}<br><span style="color:var(--subtle);font-size:.62rem">${v.src}</span></div>
    </div>
    ${methodPanel}${correctionPanel}
    </div>`;
  });

  // Dark zone
  html += `<div class="tier-divider">ğŸ•³ï¸ Data Dark Zone â€” ${tier3.length} vendors with no public data</div>`;
  tier3.forEach(v => {
    html += `<div class="rank-row-wrapper"><div class="rank-row dark-row" style="opacity:.45">
      <div class="rank-num">â€”</div>
      <div><span class="rank-flag">${v.flag}</span><span class="rank-name">${v.name}</span>
        <span style="font-size:.7rem;color:var(--subtle);margin-left:5px">${v.co}</span></div>
      <div style="font-size:.7rem;color:var(--subtle)">unknown</div>
      <div style="font-size:.65rem;color:var(--subtle)">${v.reason}</div>
    </div></div>`;
  });

  table.innerHTML = html;
}

// â”€â”€ COUNTRY RANKING â”€â”€
// Static estimates with confidence labels â€” based on vendor HQ + deployment geography
// Sources: China NDB 2025, OpenRouter State of AI, GATT methodology
function buildCountryRank() {
  const el = document.getElementById('countryRank');
  if (!el) return;

  const staticCountries = [
    {flag:'ğŸ‡¨ğŸ‡³', name:'China',         pct:55, vol:'~66T',  conf:'Medium', note:'Doubao dominant Â· NDB official 30T/d mid-2025',   col:'var(--cn)'},
    {flag:'ğŸ‡ºğŸ‡¸', name:'United States', pct:30, vol:'~36T',  conf:'Medium', note:'Google + OpenAI + Microsoft Azure',                col:'var(--us)'},
    {flag:'ğŸ‡¬ğŸ‡§', name:'United Kingdom',pct:4,  vol:'~4.8T', conf:'Low',    note:'DeepMind + AWS UK Â· model est.',                   col:'#6b7280'},
    {flag:'ğŸ‡©ğŸ‡ª', name:'Germany',       pct:3,  vol:'~3.6T', conf:'Low',    note:'Aleph Alpha + enterprise deployments',             col:'#6b7280'},
    {flag:'ğŸ‡¯ğŸ‡µ', name:'Japan',         pct:3,  vol:'~3.6T', conf:'Low',    note:'SoftBank + NTT AI Â· govt initiatives',            col:'#6b7280'},
    {flag:'ğŸ‡«ğŸ‡·',  name:'France',        pct:1.5,vol:'~1.8T', conf:'Low',    note:'Mistral AI HQ Â· EU AI sovereignty play',           col:'#6b7280'},
    {flag:'ğŸ‡¨ğŸ‡¦',  name:'Canada',        pct:1,  vol:'~1.2T', conf:'Low',    note:'Cohere + academic labs Â· punching above weight',   col:'#6b7280'},
    {flag:'ğŸ‡®ğŸ‡³',  name:'India',         pct:0.6,vol:'~0.8T', conf:'Low',    note:'0.6% of China\'s volume today â€” but 1.4B people + IIT talent + govt AI mission = the biggest upside in this table', col:'#f59e0b'},
    {flag:'ğŸ‡°ğŸ‡·',  name:'South Korea',   pct:0.5,vol:'~0.6T', conf:'Low',    note:'Samsung + Naver HyperCLOVA',                       col:'#6b7280'},
    {flag:'ğŸ‡§ğŸ‡·',  name:'Brazil',        pct:0.4,vol:'~0.5T', conf:'Low',    note:'0.4% now â€” but 215M people, Portuguese-first internet, and Lula\'s AI investment push. LatAm\'s sleeping giant wakes up.', col:'#22c55e'},
    {flag:'ğŸ‡¸ğŸ‡¦',  name:'Saudi Arabia',  pct:0.25,vol:'~0.3T',conf:'Low',    note:'Arabic NLP fastest-growing globally. $100B+ Saudi AI investment. The Arab world\'s AI capital race is on.', col:'#f59e0b'},
    {flag:'ğŸŒ',  name:'Others',        pct:0.75,vol:'~0.9T', conf:'Low',    note:'Israel, UAE, Singapore, etc.',                     col:'#9ca3af'},
  ];

  let html = '';
  staticCountries.forEach((c, i) => {
    const confColor = c.conf === 'Medium' ? '#92400e' : '#6b7280';
    html += `<div class="country-row">
      <div class="rank-num">${i+1}</div>
      <div style="display:flex;align-items:center;gap:8px">
        <span style="font-size:1.1rem">${c.flag}</span>
        <div>
          <span style="font-weight:600;font-size:.9rem">${c.name}</span>
          <div style="font-size:.62rem;color:var(--muted)">${c.note}</div>
        </div>
      </div>
      <div style="font-weight:700;font-size:.9rem">${c.vol}</div>
      <div style="flex:1;padding-left:12px">
        <div style="height:6px;border-radius:3px;background:${c.col};width:${c.pct}%;opacity:0.75;max-width:100%"></div>
        <div style="font-size:.68rem;color:var(--muted);margin-top:2px">${c.pct}% est. Â· <span style="color:${confColor};font-weight:600">${c.conf} confidence</span></div>
      </div>
    </div>`;
  });
  el.innerHTML = html;
}

// â”€â”€ SHARE â”€â”€
function shareStats() {
  const text = `Global AI Token Tracker â€” Feb 26, 2026\n\nğŸŒ ~~151T tokens/day globally\nğŸ‡¨ğŸ‡³ China: ~55% by volume (Doubao 63T/day)\nğŸ‡ºğŸ‡¸ US: leads by compute value (Google 50T + OpenAI 19T + Claude 10T)\nğŸ“ˆ Anthropic revised 2.5Tâ†’10T after $14B ARR confirmed\n\nhttps://gf691271.github.io/gatt/`;
  if (navigator.share) {
    navigator.share({ title: 'Global AI Token Tracker', text, url: 'https://gf691271.github.io/ai-token-tracker/' });
  } else {
    navigator.clipboard.writeText(text).then(() => {
      const btn = document.querySelector('.btn-share');
      btn.textContent = 'âœ“ Copied to clipboard';
      setTimeout(() => btn.textContent = 'â†— Share these numbers', 2000);
    });
  }
}

// â”€â”€ NUMBER COUNTER ANIMATION â”€â”€
// Animates numbers from 0 to target value when they scroll into view
function animateCounter(el, target, suffix, duration) {
  if (!el || el.dataset.animated) return;
  el.dataset.animated = '1';
  const start = performance.now();
  const isFloat = String(target).includes('.');
  function tick(now) {
    const elapsed = now - start;
    const progress = Math.min(elapsed / duration, 1);
    // Ease out cubic
    const eased = 1 - Math.pow(1 - progress, 3);
    const current = target * eased;
    el.textContent = (isFloat ? current.toFixed(1) : Math.round(current)) + suffix;
    if (progress < 1) requestAnimationFrame(tick);
    else el.textContent = (isFloat ? target.toFixed(1) : target) + suffix;
  }
  requestAnimationFrame(tick);
}

function setupCounterAnimations() {
  // Headline numbers
  const animations = [
    { selector: '#hl-global-tokens', target: 151, suffix: 'T', duration: 1200 },
    { selector: '#hl-growth', target: 12, suffix: '%', duration: 800 },
    { selector: '#hl-cn-vol', target: 55, suffix: '%', duration: 900 },
    { selector: '#hl-us-val', target: 62, suffix: '%', duration: 900 },
    { selector: '#hl-year-proj', target: 1000, suffix: 'T', duration: 1500 },
    { selector: '#hl-dark-count', target: 11, suffix: '', duration: 600 },
  ];
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const anim = animations.find(a => entry.target.matches(a.selector));
        if (anim) animateCounter(entry.target, anim.target, anim.suffix, anim.duration);
      }
    });
  }, { threshold: 0.5 });
  animations.forEach(a => {
    const el = document.querySelector(a.selector);
    if (el) observer.observe(el);
  });
}

// â”€â”€ INIT â”€â”€
initChart();
buildRankTable();
buildCountryRank();
setupCounterAnimations();

// â”€â”€ ACTION BUTTONS â”€â”€
let liked = false;
function handleLike() {
  liked = !liked;
  const btn = document.getElementById('btn-like');
  const countEl = document.getElementById('like-count');
  btn.classList.toggle('liked', liked);
  countEl.textContent = liked ? 249 : 248;
}
function handleShare() {
  const url = window.location.href;
  if (navigator.share) {
    navigator.share({ title: 'GATT â€” Global AI Token Tracker', url });
  } else {
    navigator.clipboard.writeText(url).then(() => alert('Link copied!'));
  }
}
function handleCorrect() {
  window.open('https://github.com/gf691271/gatt/issues/new?title=Data+correction&labels=data', '_blank');
}

// â”€â”€ COPY SHARE TEXT â”€â”€
function copyShareText() {
  const text = `China runs 55% of global AI tokens, US runs 30%. But in compute value, it flips. The Token Economy is not what you think.\n\nGATT Token Economy Index â†’ https://gf691271.github.io/gatt/ #TokenEconomy #AIdata`;
  navigator.clipboard.writeText(text).then(() => {
    const btn = document.getElementById('btn-copy-share');
    btn.textContent = 'âœ“ Copied!';
    setTimeout(() => { btn.textContent = 'ğŸ“‹ Copy shareable text'; }, 2000);
  });
}

// â”€â”€ DATA EXPORT â”€â”€
function downloadCSV() {
  const header = 'Rank,Vendor,Company,Country,Tokens_T_day,Tier,Confidence,Source\n';
  const allRanked = [...vendors, ...tier2].sort((a,b) => b.tokNum - a.tokNum);
  const rows = allRanked.map((v,i) => 
    `${i+1},"${v.name}","${v.co}","${v.country}",${v.tokNum},${v.conf===1?2:1},"${v.conf===3?'Verified':v.conf===2?'Media':'Estimated'}","${v.src}"`
  ).join('\n');
  const csv = `# GATT Global AI Token Tracker â€” Data Export\n# Source: https://gf691271.github.io/gatt/ by Frank Gao â€” CC BY 4.0\n# Updated: 2026-02-26 | Version: 0.35\n#\n${header}${rows}`;
  const blob = new Blob([csv], { type: 'text/csv' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'gatt-vendor-data-2026-02-26.csv'; a.click();
  URL.revokeObjectURL(url);
}

function downloadMD() {
  const allRanked = [...vendors, ...tier2].sort((a,b) => b.tokNum - a.tokNum);
  let md = `# GATT Global AI Token Tracker\n**Source:** https://gf691271.github.io/gatt/ by Frank Gao â€” CC BY 4.0  \n**Updated:** 2026-02-26 | **Global Total:** ~151T tokens/day\n\n## Key Numbers\n- ğŸŒ Global daily tokens: **~151T/day** (Feb 2026)\n- ğŸ‡¨ğŸ‡³ China share: **~55% volume** / ~14% compute value\n- ğŸ‡ºğŸ‡¸ US share: **~30% volume** / ~62% compute value\n- ğŸ“ˆ MoM growth: **+12%** (Janâ†’Feb 2026)\n- ğŸ¥‡ Top vendor: **Doubao** (ByteDance) ~63T/day\n\n## Vendor Ranking\n\n| # | Vendor | Company | Country | T Tokens/day | Confidence | Source |\n|---|--------|---------|---------|--------------|------------|--------|\n`;
  allRanked.forEach((v,i) => {
    const conf = v.conf===3?'âœ“ Verified':v.conf===2?'~ Media':'â‰ˆ Estimated';
    md += `| ${i+1} | ${v.flag} ${v.name} | ${v.co} | ${v.country} | ${v.tokens} | ${conf} | ${v.src} |\n`;
  });
  md += `\n## Attribution\n> "According to the Global AI Token Tracker (GATT), a project by Frank Gao tracking daily AI inference consumption across 29 vendors..." \n> Source: https://gf691271.github.io/gatt/ â€” CC BY 4.0\n`;
  const blob = new Blob([md], { type: 'text/markdown' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'gatt-data-2026-02-26.md'; a.click();
  URL.revokeObjectURL(url);
}

// â”€â”€ AUTO DATE â”€â”€
(function() {
  const d = new Date();
  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  const label = `Updated ${months[d.getMonth()]} ${d.getDate()}, ${d.getFullYear()}`;
  const el = document.getElementById('header-date');
  if (el) el.textContent = label;
})();

// â”€â”€ LANGUAGE TOGGLE â”€â”€
const i18n = {
  en: {
    tagline: 'The open index tracking the global Token Economy â€” AI inference as commodity, currency, and geopolitical force.',
    'header-date-prefix': 'Updated',
    'section-key-numbers': 'Key Numbers â€” Feb 26, 2026',
    'section-projections': '2026 Projections â€” End of Year',
    'section-spotlight': 'Spotlight â€” The Race at the Top: Doubao vs Gemini',
    'section-trend': 'Daily Trend â€” Token Consumption Over Time',
    'section-vendor-rank': 'Vendor Ranking â€” Daily Tokens',
    'section-country-rank': 'Country Ranking â€” Token Volume Share',
    'section-rising': 'Rising Powers â€” The Next Billion Tokens',
    'section-watchlist': 'Watch List â€” Numbers to Track Next',
    'section-token-economy': 'The Token Economy â€” A Macro Framework',
    'section-about': 'About This Project',
    'section-sources': 'Data Sources',
    'section-methodology': 'Methodology â€” How We Estimate',
    'section-agent-api': 'For AI Agents â€” Machine-Readable Data Layer',
    'section-share': 'Share This Data',
    'section-export': 'Export Data â€” Download for Analysis',
    'section-changelog': 'Correction & Update Log â€” Public Data Revision History',
  },
  zh: {
    tagline: 'å…¨çƒ Token ç»æµå¼€æ”¾æŒ‡æ•° â€” è¿½è¸ª AI æ¨ç†ç®—åŠ›ä½œä¸ºå¤§å®—å•†å“ã€è´§å¸ä¸åœ°ç¼˜æ”¿æ²»åŠ›é‡çš„æµåŠ¨ã€‚',
    'header-date-prefix': 'æ›´æ–°äº',
    'section-key-numbers': 'æ ¸å¿ƒæ•°æ® â€” 2026å¹´2æœˆ26æ—¥',
    'section-projections': '2026å¹´é¢„æµ‹ â€” å¹´æœ«å±•æœ›',
    'section-spotlight': 'ç„¦ç‚¹å¯¹æ¯” â€” é¡¶ç«¯ä¹‹äº‰ï¼šè±†åŒ… vs Gemini',
    'section-trend': 'æ—¥è¶‹åŠ¿å›¾ â€” Tokenæ¶ˆè€—é‡å†å²æ›²çº¿',
    'section-vendor-rank': 'å‚å•†æ’è¡Œ â€” æ¯æ—¥Tokené‡',
    'section-country-rank': 'å›½å®¶æ’è¡Œ â€” Tokené‡ä»½é¢',
    'section-rising': 'å´›èµ·åŠ›é‡ â€” ä¸‹ä¸€ä¸ªåäº¿Tokenæ¥è‡ªå“ªé‡Œ',
    'section-watchlist': 'è§‚å¯Ÿæ¸…å• â€” å€¼å¾—è¿½è¸ªçš„ä¸‹ä¸€ä¸ªæ•°å­—',
    'section-token-economy': 'Tokenç»æµå­¦ â€” å®è§‚æ¡†æ¶',
    'section-about': 'å…³äºæœ¬é¡¹ç›®',
    'section-sources': 'æ•°æ®æ¥æº',
    'section-methodology': 'æ–¹æ³•è®º â€” å¦‚ä½•ä¼°ç®—',
    'section-agent-api': 'é¢å‘AI Agent â€” æœºå™¨å¯è¯»æ•°æ®å±‚',
    'section-share': 'åˆ†äº«æ•°æ®',
    'section-export': 'å¯¼å‡ºæ•°æ® â€” ä¸‹è½½ç”¨äºåˆ†æ',
    'section-changelog': 'ä¿®æ­£è®°å½• â€” å…¬å¼€æ•°æ®ä¿®æ­£å†å²',
  }
};
let currentLang = 'en';

// Enhanced setLang â€” also translates section labels
function updateSectionLabels(lang) {
  const labels = document.querySelectorAll('.section-label');
  const keys = Object.keys(i18n.en).filter(k => k.startsWith('section-'));
  const enValues = keys.map(k => i18n.en[k]);
  labels.forEach(label => {
    const text = label.textContent.trim();
    const idx = enValues.findIndex(v => text === v || text.startsWith(v.split('â€”')[0].trim()));
    if (idx >= 0) {
      const key = keys[idx];
      label.textContent = i18n[lang][key] || text;
    }
  });
}
function setLang(lang) {
  currentLang = lang;
  document.getElementById('btn-en').classList.toggle('active', lang === 'en');
  document.getElementById('btn-zh').classList.toggle('active', lang === 'zh');
  // tagline
  const tg = document.getElementById('tagline');
  if (tg) tg.textContent = i18n[lang].tagline;
  // i18n spans
  document.querySelectorAll('.i18n').forEach(el => {
    el.textContent = el.dataset[lang] || el.dataset.en;
  });
  // section labels
  updateSectionLabels(lang);
  // i18n data attributes
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.dataset.i18n;
    if (i18n[lang][key]) el.textContent = i18n[lang][key];
  });
  // Update page title
  document.title = lang === 'zh' ? 'GATT â€” å…¨çƒAI Tokenè¿½è¸ªå™¨' : 'GATT â€” Global AI Token Tracker';
}

// â”€â”€ THEME SWITCHER â”€â”€
function setTheme(t) {
  document.documentElement.setAttribute('data-theme', t);
  localStorage.setItem('gatt-theme', t);
  ['a','b','c','d'].forEach(x => {
    const btn = document.getElementById('th-' + x);
    if (btn) btn.style.borderColor = (x === t) ? '#2563eb' : 'transparent';
  });
}
(function() {
  const saved = localStorage.getItem('gatt-theme') || 'b';
  setTheme(saved);
})();
</script>

<div id="theme-switcher" style="position:fixed;bottom:20px;right:20px;display:flex;gap:4px;z-index:999;background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:4px 6px;box-shadow:0 2px 8px rgba(0,0,0,0.12);">
  <span style="font-family:-apple-system,sans-serif;font-size:0.65rem;color:var(--muted);padding:3px 4px;align-self:center;">Theme</span>
  <button onclick="setTheme('a')" id="th-a" style="width:26px;height:26px;border-radius:50%;border:2px solid transparent;background:#0d0d0b;color:#00ff88;font-size:0.65rem;font-weight:700;cursor:pointer;font-family:monospace;">A</button>
  <button onclick="setTheme('b')" id="th-b" style="width:26px;height:26px;border-radius:50%;border:2px solid transparent;background:#f7f6f3;color:#171715;font-size:0.65rem;font-weight:700;cursor:pointer;font-family:Georgia,serif;">B</button>
  <button onclick="setTheme('c')" id="th-c" style="width:26px;height:26px;border-radius:50%;border:2px solid transparent;background:#f9fafb;color:#111827;font-size:0.65rem;font-weight:700;cursor:pointer;font-family:-apple-system,sans-serif;">C</button>
  <button onclick="setTheme('d')" id="th-d" style="width:26px;height:26px;border-radius:50%;border:2px solid transparent;background:#0f172a;color:#38bdf8;font-size:0.65rem;font-weight:700;cursor:pointer;font-family:-apple-system,sans-serif;">D</button>
</div>
</body>
</html>
